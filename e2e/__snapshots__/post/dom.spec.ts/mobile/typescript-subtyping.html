<progress class="[&amp;::-webkit-progress-bar]:bg-sub-blue fixed top-0 left-0 z-10 w-full h-[3px] [&amp;::-webkit-progress-value]:bg-base-og" value="0" max="1"></progress><nav class="fixed z-40 flex flex-wrap w-full justify-between justify-items-center hover:animate-rainbow-water hover:bg-nav hover:bg-[length:400%_400%] opacity-10	md:opacity-100 shadow-nav shadow-lg"><h2 class="tracking-tight mr-6 text-2xl	font-bold	my-2 ml-3.5"><a class="hover:underline" href="/">1ilsang</a></h2><div class="flex"><h2 class="tracking-tight mr-6 text-xl mt-2.5"><a class="hover:underline" href="/posts">posts</a></h2><h2 class="tracking-tight mr-6 text-xl mt-2.5"><a class="hover:underline" href="/tags">tags</a></h2><div class="mr-2 w-8 h-8 mt-2" role="img" aria-label="1ilsang character"><a href="/about"><img class="border border-solid rounded-full border-white-blue" src="/images/chul.webp" alt="1ilsang"></a></div></div></nav><section class="h-auto min-h-full max-w-screen-md py-20 md:py-28 mx-4 min-[790px]:m-auto print:py-0"><h1 class="text-4xl md:text-6xl break-words">Object.keys()는 왜 string[] 타입일까?</h1><section class="flex items-center mt-4"><div class="mr-2 w-9	h-9 md:w-12 md:h-12" role="img" aria-label="1ilsang character"><a href="/about"><img class="border border-solid rounded-full border-sub-blue" src="/images/chul.webp" alt="1ilsang"></a></div><div><a class="text-lg" href="/about">1ilsang</a><div class="text-sub-blue text-sm">클라이밍 하실래염?</div></div></section><section class="flex flex-wrap mt-2 items-end"><a class="text-highlight print:text-black hover:underline mr-2" target="_self" href="/tags/typescript">#<!-- -->typescript</a><a class="text-highlight print:text-black hover:underline mr-2" target="_self" href="/tags/structural-subtyping">#<!-- -->structural-subtyping</a><a class="text-highlight print:text-black hover:underline mr-2" target="_self" href="/tags/object-keys">#<!-- -->object-keys</a></section><section><div class="text-date-gray inline">Published <time datetime="2024-05-10 22:11">2024-05-10 22:11</time></div></section><section id="post-body-container" class="relative"><div class="markdown"><p></p><div class="img-container"><div class="img-wrap cover"><img src="https://github.com/1ilsang/dev/assets/23524849/8105b3d4-e413-4a36-929f-a0a6a1d27aff" alt="cover"></div></div><p></p>
<h2 id="index" data-heading="true"><a data-heading="true" href="#index"><span class="icon icon-link"></span></a>Index</h2>
<ul>
<li><a class="underline-highlight-fade" target="_blank" href="#tldr" rel="noreferrer noopener">TL;DR!</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="#문제" rel="noreferrer noopener">문제</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="#구조적-서브-타이핑이란" rel="noreferrer noopener">구조적 서브 타이핑이란</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="#해결" rel="noreferrer noopener">해결</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="#마무리" rel="noreferrer noopener">마무리</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="#one-more-thing" rel="noreferrer noopener">One more thing</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="#참고" rel="noreferrer noopener">참고</a></li>
</ul>
<h2 id="tldr" data-heading="true"><a data-heading="true" href="#tldr"><span class="icon icon-link"></span></a>TL;DR!</h2>
<p>타입스크립트는 자바스크립트의 덕 타입을 표현하기 위해 구조적 서브 타이핑을 채택하고 있다.</p>
<p><code>Object.keys()</code>는 런타임에서의 안정성을 위해 넓은 타입인 <code>string[]</code> 타입으로 추론된다.</p>
<h2 id="문제" data-heading="true"><a data-heading="true" href="#문제"><span class="icon icon-link"></span></a>문제</h2>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="material-theme-palenight"><code data-language="ts" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#C792EA">interface</span><span style="color:#FFCB6B"> MyObject</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#F07178">  first</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> number</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#F07178">  second</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#F07178">  third</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> boolean</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> parseMyObject </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> (</span><span style="color:#BABED8;font-style:italic">object</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> MyObject</span><span style="color:#89DDFF">)</span><span style="color:#C792EA"> =&gt;</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#C792EA">  const</span><span style="color:#BABED8"> parsed</span><span style="color:#89DDFF"> =</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> accNum</span><span style="color:#89DDFF">:</span><span style="color:#F78C6C"> 0</span><span style="color:#89DDFF">,</span><span style="color:#F07178"> trueCount</span><span style="color:#89DDFF">:</span><span style="color:#F78C6C"> 0</span><span style="color:#89DDFF"> };</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#BABED8">  Object</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">keys</span><span style="color:#F07178">(</span><span style="color:#BABED8">object</span><span style="color:#F07178">)</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">forEach</span><span style="color:#F07178">(</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">key</span><span style="color:#89DDFF">)</span><span style="color:#C792EA"> =&gt;</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">    // 🚨 Element implicitly has an 'any' type because expression of type 'string' can't be used to index type 'MyObject'.</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">    // No index signature with a parameter of type 'string' was found on type 'MyObject'.(7053)</span></span>
<span data-line="" data-highlighted-line=""><span style="color:#C792EA">    const</span><span style="color:#BABED8"> curValue</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> object</span><span style="color:#F07178">[</span><span style="color:#BABED8">key</span><span style="color:#F07178">]</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">    if</span><span style="color:#F07178"> (</span><span style="color:#89DDFF">!</span><span style="color:#82AAFF">isNaN</span><span style="color:#F07178">(</span><span style="color:#BABED8">curValue</span><span style="color:#F07178">)) </span><span style="color:#89DDFF">{</span></span>
<span data-line=""><span style="color:#BABED8">      parsed</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">accNum</span><span style="color:#89DDFF"> +=</span><span style="color:#BABED8"> curValue</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">    }</span><span style="color:#89DDFF;font-style:italic"> else</span><span style="color:#89DDFF;font-style:italic"> if</span><span style="color:#F07178"> (</span><span style="color:#BABED8">curValue</span><span style="color:#89DDFF"> ===</span><span style="color:#FF9CAC"> true</span><span style="color:#F07178">) </span><span style="color:#89DDFF">{</span></span>
<span data-line=""><span style="color:#BABED8">      parsed</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">trueCount</span><span style="color:#89DDFF">++;</span></span>
<span data-line=""><span style="color:#89DDFF">    }</span></span>
<span data-line=""><span style="color:#89DDFF">  }</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">  return</span><span style="color:#BABED8"> parsed</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">};</span></span></code></pre></figure>
<p>개발을 하다 보면 자연스럽게 객체를 많이 사용하게 된다. 이때 <a class="underline-highlight-fade" target="_blank" href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/keys" rel="noreferrer noopener">Object.keys</a> 메서드를 사용하면 항상 <code>key</code> 값이 <code>string</code>으로 추론되는 것을 확인할 수 있다.</p>
<br>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="material-theme-palenight"><code data-language="ts" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> keyList </span><span style="color:#89DDFF">=</span><span style="color:#BABED8"> Object</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">keys</span><span style="color:#BABED8">(obj) </span><span style="color:#89DDFF;font-style:italic">as</span><span style="color:#FFCB6B"> Array</span><span style="color:#89DDFF">&lt;keyof</span><span style="color:#89DDFF"> typeof</span><span style="color:#BABED8"> obj</span><span style="color:#89DDFF">&gt;;</span></span></code></pre></figure>
<p><code>string</code>으로 <a class="underline-highlight-fade" target="_blank" href="https://www.typescriptlang.org/docs/handbook/type-inference.html" rel="noreferrer noopener">타입 추론(Type Inference)</a> 되었기 때문에 이후 코딩의 편의성을 위해 다시 <a class="underline-highlight-fade" target="_blank" href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#type-assertions" rel="noreferrer noopener">타입 단언(Type Assertion)</a>을 하게 된다.</p>
<p>단언을 통한 타입 제어가 마음을 불편하게 하기 때문에 <a class="underline-highlight-fade" target="_blank" href="https://www.typescriptlang.org/ko/docs/handbook/2/generics.html" rel="noreferrer noopener">제너릭 타입</a>으로라도 추론하고 싶어 진다.</p>
<br>
<figure data-rehype-pretty-code-figure=""><figcaption data-rehype-pretty-code-title="" data-language="ts" data-theme="material-theme-palenight">TypeScript/src/lib/es2015.core.d.ts</figcaption><pre tabindex="0" data-language="ts" data-theme="material-theme-palenight"><code data-language="ts" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#C792EA">interface</span><span style="color:#FFCB6B"> ObjectConstructor</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#F07178">  keys</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">o</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> {}):</span><span style="color:#FFCB6B"> string</span><span style="color:#BABED8">[]</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span></code></pre></figure>
<p>하지만 타입스크립트는 <a class="underline-highlight-fade" target="_blank" href="https://github.com/microsoft/TypeScript/blob/36ac4eb700ce596033762b821545753753d13444/src/lib/es2015.core.d.ts#L301-L305" rel="noreferrer noopener">Object.keys&lt;T&gt;() 제너릭 타입을 제공하지 않는다</a>.</p>
<br>
<p>여기서 의문이 생긴다.</p>
<ul>
<li>기존의 key 타입을 왜 추론하지 못할까?</li>
<li>제너릭 타입은 왜 제공하지 않았을까?</li>
</ul>
<br>
<p>오늘은 타입스크립트를 사용하면서 만나는 미묘한 당혹스러움에 대해 파헤쳐 보고자 한다.</p>
<h2 id="구조적-서브-타이핑이란" data-heading="true"><a data-heading="true" href="#구조적-서브-타이핑이란"><span class="icon icon-link"></span></a>구조적 서브 타이핑이란</h2>
<p>앞에서 다룬 문제의 이유는 <a class="underline-highlight-fade" target="_blank" href="https://www.typescriptlang.org/docs/handbook/type-compatibility.html" rel="noreferrer noopener">타입스크립트가 구조적 서브 타이핑을 기반</a>으로 하고 있기 때문이다.</p>
<p>이전에 <a class="underline-highlight-fade" target="_blank" href="/posts/woowa-type-review#%ED%83%80-%EC%96%B8%EC%96%B4%EC%9D%98-%ED%83%80%EC%9E%85-%EC%8B%9C%EC%8A%A4%ED%85%9C%EA%B3%BC-%EB%B9%84%EA%B5%90" rel="noreferrer noopener">우아한 타입스크립트</a>에서 구조적 타이핑을 잠깐 이야기한 적이 있었다.</p>
<p></p><div class="img-container"><div class="img-wrap"><img src="https://github.com/1ilsang/dev/assets/23524849/ff217791-2571-4ecf-9494-b95905d77311" alt="duck typing"></div></div><p></p>
<blockquote>
<p>Image Source: <a class="underline-highlight-fade" target="_blank" href="https://stackoverflow.com/questions/4205130/what-is-duck-typing" rel="noreferrer noopener">What is duck typing</a></p>
</blockquote>
<p>자바스크립트는 <a class="underline-highlight-fade" target="_blank" href="https://ko.wikipedia.org/wiki/%EB%8D%95_%ED%83%80%EC%9D%B4%ED%95%91" rel="noreferrer noopener">덕 타이핑</a>을 기반으로 하는 <a class="underline-highlight-fade" target="_blank" href="https://developer.mozilla.org/ko/docs/Glossary/Dynamic_typing" rel="noreferrer noopener">동적 타이핑</a> 언어이다.</p>
<p>따라서 타입스크립트는 자바스크립트의 특성(유연한 동적 타입)을 해치지 않으면서 타입을 강제(<a class="underline-highlight-fade" target="_blank" href="https://developer.mozilla.org/ko/docs/Glossary/Static_typing" rel="noreferrer noopener">정적 타이핑</a>)하기 위한 고민을 하게 된다.</p>
<br>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="material-theme-palenight"><code data-language="ts" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#C792EA">type</span><span style="color:#FFCB6B"> Book</span><span style="color:#89DDFF"> =</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#F07178">  name</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">};</span></span></code></pre></figure>
<p>위와 같은 객체 타입 <code>Book</code>을 선언하게 되면 일반적인 <a class="underline-highlight-fade" target="_blank" href="https://ko.wikipedia.org/wiki/%EB%AA%85%EB%AA%A9%EC%A0%81_%EC%9E%90%EB%A3%8C%ED%98%95_%EC%B2%B4%EA%B3%84" rel="noreferrer noopener">명목적 타입 시스템</a>에서는 반드시 <code>Book { name: string }</code> 형태의 타입만 와야 한다.</p>
<br>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="material-theme-palenight"><code data-language="ts" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> getName </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> (</span><span style="color:#BABED8;font-style:italic">book</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> Book</span><span style="color:#89DDFF">)</span><span style="color:#C792EA"> =&gt;</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">  return</span><span style="color:#BABED8"> book</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">name</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">};</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> book1 </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> name</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">123</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF"> };</span></span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> book2 </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> name</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">123</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span><span style="color:#F07178"> model</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">wow</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF"> };</span></span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> book3 </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> name</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">123</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span><span style="color:#F07178"> model</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">wow</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span><span style="color:#F07178"> wow</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">line</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF"> };</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#82AAFF">getName</span><span style="color:#BABED8">(book1)</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // OK</span></span>
<span data-line=""><span style="color:#82AAFF">getName</span><span style="color:#BABED8">(book2)</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // OK</span></span>
<span data-line=""><span style="color:#82AAFF">getName</span><span style="color:#BABED8">(book3)</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // OK</span></span></code></pre></figure>
<p>하지만 타입스크립트에서는 위와 같은 모든 형태의 객체가 가능하다. 이것이 바로 구조적 서브 타이핑이다.</p>
<p>구조적 타입 시스템의 주요 특성은 <u><strong>값을 할당할 때 정의된 타입에 필요한 속성을 가지고 있다면 호환된다</strong></u>는 것이다.</p>
<p>따라서 구조적 타입 시스템에서 타입은 <u>값의 집합</u>으로 생각하면 된다.</p>
<p>그렇다면 구조적 서브 타이핑과 <code>Object.keys</code>의 반환 타입에는 어떤 연관이 있는 것일까?</p>
<br>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="material-theme-palenight"><code data-language="ts" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#C792EA">class</span><span style="color:#FFCB6B"> MyObject</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  // https://stackoverflow.com/questions/49464634/difference-between-object-and-object-in-typescript</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  // object 타입은 원시 타입을 제외한 모든 값이 될 수 있다.</span></span>
<span data-line=""><span style="color:#F07178">  keys</span><span style="color:#89DDFF">&lt;</span><span style="color:#FFCB6B">T</span><span style="color:#C792EA"> extends</span><span style="color:#FFCB6B"> object</span><span style="color:#89DDFF">&gt;(</span><span style="color:#BABED8;font-style:italic">o</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> T</span><span style="color:#89DDFF">):</span><span style="color:#BABED8"> (</span><span style="color:#89DDFF">keyof</span><span style="color:#FFCB6B"> T</span><span style="color:#BABED8">)[]</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> keys </span><span style="color:#89DDFF">=</span><span style="color:#BABED8"> MyObject</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">keys</span><span style="color:#89DDFF">&lt;</span><span style="color:#FFCB6B">Book</span><span style="color:#89DDFF">&gt;</span><span style="color:#BABED8">(book1)</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // "name"[]</span></span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> keys </span><span style="color:#89DDFF">=</span><span style="color:#BABED8"> MyObject</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">keys</span><span style="color:#89DDFF">&lt;</span><span style="color:#FFCB6B">Book</span><span style="color:#89DDFF">&gt;</span><span style="color:#BABED8">(book2)</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // "name"[]</span></span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> keys </span><span style="color:#89DDFF">=</span><span style="color:#BABED8"> MyObject</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">keys</span><span style="color:#BABED8">(book3)</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // ("name" | "model" | "wow")[]</span></span></code></pre></figure>
<p>자바스크립트의 덕 타입 덕에 객체는 런타임 단계에서 더 많은 속성을 가질 수 있다. 또한 구조적 서브 타이핑은 필요한 속성을 가지고 있다면 확장된 집합과 호환되며 에러를 노출하지 않는다.</p>
<p>그렇기 때문에 타입스크립트는 객체 인자에 <strong><code>T</code> 타입의 값만 존재한다는 보장을 할 수 없다</strong>.</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="material-theme-palenight"><code data-language="ts" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#89DDFF;font-style:italic">for</span><span style="color:#BABED8"> (</span><span style="color:#C792EA">const</span><span style="color:#BABED8"> key </span><span style="color:#89DDFF">of</span><span style="color:#BABED8"> Object</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">keys</span><span style="color:#BABED8">(book1)) </span><span style="color:#89DDFF">{</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  // 🚨 No index signature with a parameter of type 'string' was found on type 'Book'.(7053)</span></span>
<span data-line=""><span style="color:#C792EA">  const</span><span style="color:#BABED8"> value</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> book1</span><span style="color:#F07178">[</span><span style="color:#BABED8">key</span><span style="color:#F07178">]</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span></code></pre></figure>
<p>따라서 타입스크립트는 런타임에서의 안정성을 찾기 위해 좁은 타입의 <code>(keyof T)[]</code>가 아닌 넓은 타입인 <code>string[]</code>으로 추론한다.</p>
<p>관련 논의는 <a class="underline-highlight-fade" target="_blank" href="https://github.com/microsoft/TypeScript/pull/12253#issuecomment-263132208" rel="noreferrer noopener">#12253</a> 이슈 코멘트에서 확인할 수 있다.</p>
<ul>
<li><a class="underline-highlight-fade" target="_blank" href="/posts/typescript-subtyping#one-more-thing" rel="noreferrer noopener">글의 말미</a>에서 구조적 서브 타이핑에 대해 더 다루도록 하겠다.</li>
</ul>
<h2 id="해결" data-heading="true"><a data-heading="true" href="#해결"><span class="icon icon-link"></span></a>해결</h2>
<p>이제 타입스크립트가 <code>Object.keys</code>의 값을 <code>string[]</code>으로 추론하는 이유를 확인했다.</p>
<p>이를 타입 단언을 사용하지 않고 추론하려면 어떻게 해야 할까?</p>
<h3 id="타입-가드를-통한-타입-좁히기" data-heading="true"><a data-heading="true" href="#타입-가드를-통한-타입-좁히기"><span class="icon icon-link"></span></a>타입 가드를 통한 타입 좁히기</h3>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="material-theme-palenight"><code data-language="ts" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> book</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> Book</span><span style="color:#89DDFF"> =</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> name</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">123</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF"> };</span></span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> book3 </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> name</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">123</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span><span style="color:#F07178"> model</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">wow</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span><span style="color:#F07178"> wow</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">line</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF"> };</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#676E95;font-style:italic">// 타입 좁히기</span></span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> isBook </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> (</span><span style="color:#BABED8;font-style:italic">key</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">):</span><span style="color:#BABED8;font-style:italic"> key</span><span style="color:#89DDFF"> is</span><span style="color:#89DDFF"> keyof</span><span style="color:#FFCB6B"> Book</span><span style="color:#C792EA"> =&gt;</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">  return</span><span style="color:#BABED8"> Object</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">keys</span><span style="color:#F07178">(</span><span style="color:#BABED8">book</span><span style="color:#F07178">)</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">includes</span><span style="color:#F07178">(</span><span style="color:#BABED8">key</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">};</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">for</span><span style="color:#BABED8"> (</span><span style="color:#C792EA">const</span><span style="color:#BABED8"> key </span><span style="color:#89DDFF">of</span><span style="color:#BABED8"> Object</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">keys</span><span style="color:#BABED8">(book3)) </span><span style="color:#89DDFF">{</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  // 타입 가드로 타입이 존재하는 컨디션 블록이 생기게 됨</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">  if</span><span style="color:#F07178"> (</span><span style="color:#82AAFF">isBook</span><span style="color:#F07178">(</span><span style="color:#BABED8">key</span><span style="color:#F07178">)) </span><span style="color:#89DDFF">{</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">    // Book 타입의 키</span></span>
<span data-line=""><span style="color:#89DDFF">  }</span><span style="color:#89DDFF;font-style:italic"> else</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">    // 구조적 서브 타이핑으로 확장된 키</span></span>
<span data-line=""><span style="color:#89DDFF">  }</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span></code></pre></figure>
<p><a class="underline-highlight-fade" target="_blank" href="https://www.typescriptlang.org/docs/handbook/2/narrowing.html#typeof-type-guards" rel="noreferrer noopener">타입 가드(Type Guards)</a>를 통한 <a class="underline-highlight-fade" target="_blank" href="https://www.typescriptlang.org/docs/handbook/2/narrowing.html#using-type-predicates" rel="noreferrer noopener">타입 좁히기(Type Narrowing)</a>를 활용하면 타입 단언을 하지 않아도 적절하게 타입을 추론할 수 있게 된다.</p>
<p>무엇보다 <u>런타임에서도 안전한 코드로 변화</u>했다.</p>
<h2 id="one-more-thing" data-heading="true"><a data-heading="true" href="#one-more-thing"><span class="icon icon-link"></span></a>ONE MORE THING</h2>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="material-theme-palenight"><code data-language="ts" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#C792EA">type</span><span style="color:#FFCB6B"> Book</span><span style="color:#89DDFF"> =</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> name</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF"> };</span></span>
<span data-line=""><span style="color:#C792EA">type</span><span style="color:#FFCB6B"> Car</span><span style="color:#89DDFF"> =</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> model</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF"> };</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> BookOrCar </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> {}</span><span style="color:#89DDFF;font-style:italic"> as</span><span style="color:#FFCB6B"> Book</span><span style="color:#89DDFF"> |</span><span style="color:#FFCB6B"> Car</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// 🚨 Property 'name' does not exist on type 'BookOrCar'.</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// Property 'name' does not exist on type 'Car'.(2339)</span></span>
<span data-line=""><span style="color:#BABED8">BookOrCar</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">name</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// 🚨 Property 'model' does not exist on type 'BookOrCar'.</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// Property 'model' does not exist on type 'Book'.(2339)</span></span>
<span data-line=""><span style="color:#BABED8">BookOrCar</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">model</span><span style="color:#89DDFF">;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> BookAndCar </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> {}</span><span style="color:#89DDFF;font-style:italic"> as</span><span style="color:#FFCB6B"> Book</span><span style="color:#89DDFF"> &amp;</span><span style="color:#FFCB6B"> Car</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#BABED8">BookAndCar</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">name</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // string</span></span>
<span data-line=""><span style="color:#BABED8">BookAndCar</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">model</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // string</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C792EA">type</span><span style="color:#FFCB6B"> A</span><span style="color:#89DDFF"> =</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">A</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#C792EA">type</span><span style="color:#FFCB6B"> B</span><span style="color:#89DDFF"> =</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">B</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C792EA">type</span><span style="color:#FFCB6B"> AorB</span><span style="color:#89DDFF"> =</span><span style="color:#FFCB6B"> A</span><span style="color:#89DDFF"> |</span><span style="color:#FFCB6B"> B</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // 'A' | 'B'</span></span>
<span data-line=""><span style="color:#C792EA">type</span><span style="color:#FFCB6B"> AandB</span><span style="color:#89DDFF"> =</span><span style="color:#FFCB6B"> A</span><span style="color:#89DDFF"> &amp;</span><span style="color:#FFCB6B"> B</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // never</span></span></code></pre></figure>
<p>구조적 서브 타이핑을 조금 더 알아보자.</p>
<p><code>Book</code> 타입과 <code>Car</code> 타입이 <a class="underline-highlight-fade" target="_blank" href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#union-types" rel="noreferrer noopener">유니온</a> 혹은 <a class="underline-highlight-fade" target="_blank" href="https://www.typescriptlang.org/docs/handbook/2/objects.html#intersection-types" rel="noreferrer noopener">교차</a> 될 때 타입 추론이 혼란스러운 부분이 있다.</p>
<p><code>BookOrCar</code>는 <code>{ name: string }</code> 혹은 <code>{ model: string }</code> 타입이 되기 때문에 두 값이 공존해야 한다고 느껴진다. 하지만 타입스크립트는 두 값 모두 추론하지 못한다.</p>
<p>반대로 교차 타입은 <code>BookAndCar</code>에서는 모든 값을 가지지만 <code>AandB</code>에서는 <code>never</code> 타입이 추론된다.</p>
<br>
<p></p><div class="img-container"><div class="img-wrap s"><img src="https://github.com/1ilsang/dev/assets/23524849/eb6ea24b-99e3-4ee0-b97e-ff2c6c78786e" alt="what"></div></div><p></p>
<p>앞에서 "구조적 타입 시스템에서의 타입은 <u>값의 집합</u>으로 생각하면 된다"고 했다.</p>
<p>각 타입을 값의 집합으로 나열해 보자.</p>
<br>
<figure data-rehype-pretty-code-figure=""><figcaption data-rehype-pretty-code-title="" data-language="json" data-theme="material-theme-palenight">Book 타입에 충족되는 값의 집합</figcaption><pre tabindex="0" data-language="json" data-theme="material-theme-palenight"><code data-language="json" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#89DDFF">{</span><span style="color:#BABED8"> name</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">123</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF"> }</span><span style="color:#BABED8">;</span></span>
<span data-line=""><span style="color:#89DDFF">{</span><span style="color:#BABED8"> name</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">123</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> model</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">wow</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF"> }</span><span style="color:#BABED8">;</span></span>
<span data-line=""><span style="color:#89DDFF">{</span><span style="color:#BABED8"> name</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">123</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> model</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">wow</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> wow</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">line</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF"> }</span><span style="color:#BABED8">;</span></span>
<span data-line=""><span style="color:#BABED8">그 외 `name`이 존재하는 객체</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure=""><figcaption data-rehype-pretty-code-title="" data-language="json" data-theme="material-theme-palenight">Car 타입에 충족되는 값의 집합</figcaption><pre tabindex="0" data-language="json" data-theme="material-theme-palenight"><code data-language="json" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#89DDFF">{</span><span style="color:#BABED8"> model</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">wow</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF"> }</span><span style="color:#BABED8">;</span></span>
<span data-line=""><span style="color:#89DDFF">{</span><span style="color:#BABED8"> name</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">123</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> model</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">wow</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF"> }</span><span style="color:#BABED8">;</span></span>
<span data-line=""><span style="color:#89DDFF">{</span><span style="color:#BABED8"> name</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">123</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> model</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">wow</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> wow</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">line</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF"> }</span><span style="color:#BABED8">;</span></span>
<span data-line=""><span style="color:#BABED8">그 외 `model`이 존재하는 객체</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure=""><figcaption data-rehype-pretty-code-title="" data-language="json" data-theme="material-theme-palenight">Book | Car 타입의 모든 값의 집합</figcaption><pre tabindex="0" data-language="json" data-theme="material-theme-palenight"><code data-language="json" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#89DDFF">{</span><span style="color:#BABED8"> name</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">123</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF"> }</span><span style="color:#BABED8">;</span></span>
<span data-line=""><span style="color:#89DDFF">{</span><span style="color:#BABED8"> name</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">123</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> model</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">wow</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF"> }</span><span style="color:#BABED8">;</span></span>
<span data-line=""><span style="color:#89DDFF">{</span><span style="color:#BABED8"> name</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">123</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> model</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">wow</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> wow</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">line</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF"> }</span><span style="color:#BABED8">;</span></span>
<span data-line=""><span style="color:#BABED8">그 외 `name`이 존재하는 객체</span></span>
<span data-line=""><span style="color:#89DDFF">{</span><span style="color:#BABED8"> model</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">wow</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF"> }</span><span style="color:#BABED8">;</span></span>
<span data-line=""><span style="color:#89DDFF">{</span><span style="color:#BABED8"> name</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">123</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> model</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">wow</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF"> }</span><span style="color:#BABED8">;</span></span>
<span data-line=""><span style="color:#89DDFF">{</span><span style="color:#BABED8"> name</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">123</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> model</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">wow</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> wow</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">line</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF"> }</span><span style="color:#BABED8">;</span></span>
<span data-line=""><span style="color:#BABED8">그 외 `model`이 존재하는 객체</span></span></code></pre></figure>
<p><code>Book | Car</code>의 경우에 Book 혹은 Car 중 <u>"항상 존재하는 값"이 없는 것</u>을 확인(<code>name</code> 혹은 <code>model</code>이 반드시 있어야 하는 경우가 없음) 할 수 있다.</p>
<br>
<figure data-rehype-pretty-code-figure=""><figcaption data-rehype-pretty-code-title="" data-language="json" data-theme="material-theme-palenight">Book &amp; Car 타입의 모든 값의 집합</figcaption><pre tabindex="0" data-language="json" data-theme="material-theme-palenight"><code data-language="json" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#89DDFF">{</span><span style="color:#BABED8"> name</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">123</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> model</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">wow</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF"> }</span><span style="color:#BABED8">;</span></span>
<span data-line=""><span style="color:#89DDFF">{</span><span style="color:#BABED8"> name</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">123</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> model</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">wow</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> wow</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">line</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF"> }</span><span style="color:#BABED8">;</span></span></code></pre></figure>
<p>반면 <code>Book &amp; Car</code>의 경우 "항상 존재하는 값"이 있는 것을 확인할 수 있다.</p>
<h3 id="결론" data-heading="true"><a data-heading="true" href="#결론"><span class="icon icon-link"></span></a>결론</h3>
<p>따라서 <code>Book | Car</code>에서는 항상 존재하는 값이 없기 때문에 <code>name</code>, <code>model</code> 어느 값도 존재하지 않게 되지만 <code>Book &amp; Car</code>에서는 <code>name</code>, <code>model</code> 모두 항상 존재하기 때문에 두 값 모두 존재하게 된다.</p>
<h2 id="마무리" data-heading="true"><a data-heading="true" href="#마무리"><span class="icon icon-link"></span></a>마무리</h2>
<p>타입스크립트를 사용하면서도 언어의 근본적인 철학을 이해하지 못한 상태로 작업한 것 같아 반성하게 되는 계기였다.</p>
<p>타입을 사용하면서 지금처럼 당혹스러운 부분이 있었는데 이번 기회에 많이 이해할 수 있었다.</p>
<h2 id="참고" data-heading="true"><a data-heading="true" href="#참고"><span class="icon icon-link"></span></a>참고</h2>
<ul>
<li><a class="underline-highlight-fade" target="_blank" href="https://www.typescriptlang.org/ko/docs/handbook/type-compatibility.html" rel="noreferrer noopener">Type Compatibility</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="https://medium.com/@yujso66/번역-왜-타입스크립트는-object-keys의-타입을-적절하게-추론하지-못할까요-477253b1aafa" rel="noreferrer noopener">[번역] 왜 타입스크립트는 Object.keys의 타입을 적절하게 추론하지 못할까요?</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="https://www.mattstobbs.com/object-keys-typescript/" rel="noreferrer noopener">Why Object.keys Returns an Array of Strings in TypeScript (And How To Fix It)</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="https://www.yongdam.sh/blog/effective-typescript-structural-typing" rel="noreferrer noopener">타입스크립트의 구조적 타이핑</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="https://github.com/microsoft/TypeScript/pull/12253#issuecomment-263132208" rel="noreferrer noopener">Object.keys() types refinement, and Object.entries() types bugfix #12253</a></li>
</ul></div><aside class="absolute inline-block h-full top-0 left-full break-words max-xl:hidden" aria-label="index"><ul class="ml-9 sticky pl-4 top-32 w-[calc(50vw-35vw)] border-l-2 border-l-base min-[1320px]:ml-20 min-[1320px]:top-48"><li data-id="index" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue">Index</li><li data-id="tldr" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue">TL;DR!</li><li data-id="문제" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue">문제</li><li data-id="구조적-서브-타이핑이란" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue">구조적 서브 타이핑이란</li><li data-id="해결" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue">해결</li><li><ul class="ml-2.5 last:mb-2"><li data-id="타입-가드를-통한-타입-좁히기" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue before:content-['-'] before:mr-1">타입 가드를 통한 타입 좁히기</li></ul></li><li data-id="one-more-thing" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue">ONE MORE THING</li><li><ul class="ml-2.5 last:mb-2"><li data-id="결론" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue before:content-['-'] before:mr-1">결론</li></ul></li><li data-id="마무리" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue">마무리</li><li data-id="참고" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue">참고</li></ul></aside></section><a class="highlighter mt-24 [&amp;&amp;]:text-transparent bg-rainbow-water bg-clip-text bg-[length:400%_400%] animate-rainbow-water" href="https://github.com/1ilsang/dev/issues/new?labels=🧊 comment&amp;assignees=1ilsang&amp;title=[🧊] Object.keys()%EB%8A%94%20%EC%99%9C%20string%5B%5D%20%ED%83%80%EC%9E%85%EC%9D%BC%EA%B9%8C?&amp;body=<!-- 환영합니다. 이슈 남겨주시면 빠르게 답변드리겠습니다. 🙇 -->" rel="noopener noreferrer" target="_blank">📮 이 포스트에 관심 있으신가요? 이슈를 남겨주세요! 👍</a><div class="flex items-center mt-1.5 mb-56"><div>☕ 소주 한 잔 후원하기</div><sub>(예금주: 이상철)</sub><img class="w-20 cursor-pointer object-contain hover:animate-bouncing" src="/images/logo/toss-pay.webp" alt="toss"><img class="w-12 cursor-pointer object-contain hover:animate-bouncing" src="/images/logo/kakao-pay.webp" alt="kakao"></div></section><footer class="w-full h-screen pt-[50vh] bg-footer"><ul class="text-center"><li class="text-white inline-block text-sm px-4 relative after:content-['•'] after:absolute after:right-[calc(0.2rem*-1)] last:after:content-['']"><a class="hover:text-black" href="/about">1ilsang</a></li><li class="text-white inline-block text-sm px-4 relative after:content-['•'] after:absolute after:right-[calc(0.2rem*-1)] last:after:content-['']"><a class="hover:text-black" href="https://github.com/1ilsang" rel="noopener noreferrer" target="_blank">GitHub</a></li><li class="text-white inline-block text-sm px-4 relative after:content-['•'] after:absolute after:right-[calc(0.2rem*-1)] last:after:content-['']"><a class="hover:text-black" href="https://www.linkedin.com/in/1ilsang" rel="noopener noreferrer" target="_blank">LinkedIn</a></li></ul></footer>