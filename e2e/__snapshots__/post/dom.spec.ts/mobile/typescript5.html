<progress class="[&amp;::-webkit-progress-bar]:bg-sub-blue fixed top-0 left-0 z-10 w-full h-[3px] appearance-none [&amp;::-webkit-progress-value]:bg-base-og" value="0" max="1"></progress><nav class="fixed z-40 flex flex-wrap w-full justify-between justify-items-center hover:animate-rainbow-water hover:bg-nav hover:bg-[length:400%_400%] opacity-10	md:opacity-100 shadow-nav shadow-lg"><h2 class="tracking-tight mr-6 text-2xl	font-bold	my-2 ml-3.5"><a class="hover:underline" href="/">1ilsang</a></h2><div class="flex"><h2 class="tracking-tight mr-6 text-xl mt-2.5"><a class="hover:underline" href="/posts">posts</a></h2><h2 class="tracking-tight mr-6 text-xl mt-2.5"><a class="hover:underline" href="/tags">tags</a></h2><div class="mr-2 w-8 h-8 mt-2" role="img" aria-label="1ilsang character"><a href="/about"><img class="border border-solid rounded-full border-white-blue" src="/images/chul.webp" alt="1ilsang"></a></div></div></nav><section class="h-auto min-h-full max-w-screen-md py-20 md:py-28 mx-4 min-[790px]:m-auto print:py-0"><h1 class="text-4xl md:text-6xl break-words">TypeScript 5.0 살펴보기</h1><section class="flex items-center mt-4"><div class="mr-2 w-9	h-9 md:w-12 md:h-12" role="img" aria-label="1ilsang character"><a href="/about"><img class="border border-solid rounded-full border-sub-blue" src="/images/chul.webp" alt="1ilsang"></a></div><div><a class="text-lg" href="/about">1ilsang</a><div class="text-sub-blue text-sm">클라이밍 하실래염?</div></div></section><section class="flex flex-wrap mt-2 items-end"><a class="text-highlight print:text-black hover:underline mr-2" target="_self" href="/tags/typescript">#<!-- -->typescript</a><a class="text-highlight print:text-black hover:underline mr-2" target="_self" href="/tags/decorator">#<!-- -->decorator</a><a class="text-highlight print:text-black hover:underline mr-2" target="_self" href="/tags/const">#<!-- -->const</a><a class="text-highlight print:text-black hover:underline mr-2" target="_self" href="/tags/extends">#<!-- -->extends</a></section><section><div class="text-date-gray inline">Published <time datetime="2023-04-09 16:24">2023-04-09 16:24</time></div></section><section id="post-body-container" class="relative"><div class="markdown"><p></p><div class="img-container"><div class="img-wrap cover"><img src="https://github.com/1ilsang/dev/assets/23524849/a05f9167-23d8-4756-bd67-9381ff38cbb7" alt="cover"></div></div><p></p>
<p>3월 초 TypeScript v5가 공식 릴리즈 되었다. 이 포스트에서는 <a class="underline-highlight-fade" target="_blank" href="https://devblogs.microsoft.com/typescript/announcing-typescript-5-0" rel="noreferrer noopener">MS 블로그에 작성된</a> 5버전의 기능들을 확인해보고 정리해 보고자 한다.</p>
<p>목차는 아래와 같이 구성되어 있다.</p>
<ul>
<li><a class="underline-highlight-fade" target="_blank" href="#decorators" rel="noreferrer noopener">Decorators</a>
<ul>
<li><a class="underline-highlight-fade" target="_blank" href="#실험적-레거시-데코레이터와의-차이점" rel="noreferrer noopener">실험적 레거시 데코레이터와의 차이점</a></li>
</ul>
</li>
<li><a class="underline-highlight-fade" target="_blank" href="#const-type-parameters" rel="noreferrer noopener">const Type Parameters</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="#supporting-multiple-configuration-files-in-extends" rel="noreferrer noopener">Supporting Multiple Configuration Files in extends</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="#all-enums-are-union-enums" rel="noreferrer noopener">All enums Are Union enums</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="#--moduleresolution-bundler" rel="noreferrer noopener">--moduleResolution bundler</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="#support-for-export-type-" rel="noreferrer noopener">Support for export type *</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="#overload-support-in-jsdoc" rel="noreferrer noopener">@overload Support in JSDoc</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="#speed-memory-and-package-size-optimizations" rel="noreferrer noopener">Speed, Memory, and Package Size Optimizations</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="#breaking-changes-and-deprecations" rel="noreferrer noopener">Breaking Changes and Deprecations</a>
<ul>
<li><a class="underline-highlight-fade" target="_blank" href="#runtime-requirements" rel="noreferrer noopener">Runtime Requirements</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="#libdts-changes" rel="noreferrer noopener">lib.d.ts Changes</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="#api-breaking-changes" rel="noreferrer noopener">API Breaking Changes</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="#forbidden-implicit-coercions-in-relational-operators" rel="noreferrer noopener">Forbidden Implicit Coercions in Relational Operators</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="#enum-overhaul" rel="noreferrer noopener">Enum Overhaul</a></li>
</ul>
</li>
<li><a class="underline-highlight-fade" target="_blank" href="#마무리" rel="noreferrer noopener">마무리</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="#참고" rel="noreferrer noopener">참고</a></li>
</ul>
<h2 id="decorators" data-heading="true"><a data-heading="true" href="#decorators"><span class="icon icon-link"></span></a><a name="decorators"></a>Decorators</h2>
<p><a class="underline-highlight-fade" target="_blank" href="https://github.com/tc39/proposal-decorators" rel="noreferrer noopener">Decorators</a>는 현재(2023/04)기준 <a class="underline-highlight-fade" target="_blank" href="https://tc39.es/process-document/" rel="noreferrer noopener">Stage 3단계</a>(4단계가 표준 추가)인 ECMAScript 공식 스펙이다. ES2024의 유력한 기능 중 하나이다.</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="material-theme-palenight"><code data-language="ts" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#C792EA">class</span><span style="color:#FFCB6B"> Person</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#F07178">  name</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#C792EA">  constructor</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">name</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#89DDFF">    this.</span><span style="color:#BABED8">name</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> name</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#F07178">  greet</span><span style="color:#89DDFF">()</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#BABED8">    console</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">log</span><span style="color:#F07178">(</span><span style="color:#89DDFF">`</span><span style="color:#C3E88D">Hello, my name is </span><span style="color:#89DDFF">${</span><span style="color:#89DDFF">this.</span><span style="color:#BABED8">name</span><span style="color:#89DDFF">}</span><span style="color:#C3E88D">.</span><span style="color:#89DDFF">`</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">  }</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> p </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> new</span><span style="color:#82AAFF"> Person</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">Ron</span><span style="color:#89DDFF">'</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#BABED8">p</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">greet</span><span style="color:#BABED8">()</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // Hello, my name is Ron.</span></span></code></pre></figure>
<p>위와 같은 간단한 Person 클래스의 greet 함수를 디버깅 하기 위해 함수 내부 시작과 끝에 <code>console.log</code>를 추가할 경우 데코레이터를 사용하면 편리하게 작업할수 있다.</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="material-theme-palenight"><code data-language="ts" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#C792EA">function</span><span style="color:#82AAFF"> loggedMethod</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">headMessage</span><span style="color:#89DDFF"> =</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">LOG:</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">  return</span><span style="color:#C792EA"> function</span><span style="color:#82AAFF"> actualDecorator</span><span style="color:#89DDFF">(</span></span>
<span data-line=""><span style="color:#BABED8;font-style:italic">    originalMethod</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> any</span><span style="color:#89DDFF">,</span><span style="color:#676E95;font-style:italic"> // 데코레이터를 사용한 함수</span></span>
<span data-line=""><span style="color:#BABED8;font-style:italic">    context</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> ClassMethodDecoratorContext</span><span style="color:#89DDFF">,</span><span style="color:#676E95;font-style:italic"> // 데코레이터를 사용하는 컨텍스트 객체의 데이터 및 함수가 있다(private, static 여부, 메서드 이름 등).</span></span>
<span data-line=""><span style="color:#89DDFF">  )</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#C792EA">    const</span><span style="color:#BABED8"> methodName</span><span style="color:#89DDFF"> =</span><span style="color:#82AAFF"> String</span><span style="color:#F07178">(</span><span style="color:#BABED8">context</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">name</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C792EA">    function</span><span style="color:#82AAFF"> replacementMethod</span><span style="color:#89DDFF">(</span><span style="color:#89DDFF;font-style:italic">this</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> any</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> ...</span><span style="color:#BABED8;font-style:italic">args</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> any</span><span style="color:#F07178">[]</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#BABED8">      console</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">log</span><span style="color:#F07178">(</span><span style="color:#89DDFF">`${</span><span style="color:#BABED8">headMessage</span><span style="color:#89DDFF">}</span><span style="color:#C3E88D"> Entering method '</span><span style="color:#89DDFF">${</span><span style="color:#BABED8">methodName</span><span style="color:#89DDFF">}</span><span style="color:#C3E88D">'.</span><span style="color:#89DDFF">`</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#C792EA">      const</span><span style="color:#BABED8"> result</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> originalMethod</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">call</span><span style="color:#F07178">(</span><span style="color:#89DDFF">this,</span><span style="color:#89DDFF"> ...</span><span style="color:#BABED8">args</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // 데코레이터를 사용하는 함수가 여기서 실행된다.</span></span>
<span data-line=""><span style="color:#BABED8">      console</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">log</span><span style="color:#F07178">(</span><span style="color:#89DDFF">`${</span><span style="color:#BABED8">headMessage</span><span style="color:#89DDFF">}</span><span style="color:#C3E88D"> Exiting method '</span><span style="color:#89DDFF">${</span><span style="color:#BABED8">methodName</span><span style="color:#89DDFF">}</span><span style="color:#C3E88D">'.</span><span style="color:#89DDFF">`</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">      return</span><span style="color:#BABED8"> result</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // 데코레이터 체이닝을 위해 존재한다.</span></span>
<span data-line=""><span style="color:#89DDFF">    }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">    return</span><span style="color:#BABED8"> replacementMethod</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">  };</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C792EA">class</span><span style="color:#FFCB6B"> Person</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  // ...</span></span>
<span data-line=""><span style="color:#89DDFF">  @</span><span style="color:#82AAFF">loggedMethod</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">[Name]</span><span style="color:#89DDFF">'</span><span style="color:#BABED8">)</span></span>
<span data-line=""><span style="color:#F07178">  greet</span><span style="color:#89DDFF">()</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#BABED8">    console</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">log</span><span style="color:#F07178">(</span><span style="color:#89DDFF">`</span><span style="color:#C3E88D">Hello, my name is </span><span style="color:#89DDFF">${</span><span style="color:#89DDFF">this.</span><span style="color:#BABED8">name</span><span style="color:#89DDFF">}</span><span style="color:#C3E88D">.</span><span style="color:#89DDFF">`</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">  }</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> p </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> new</span><span style="color:#82AAFF"> Person</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">Ron</span><span style="color:#89DDFF">'</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#BABED8">p</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">greet</span><span style="color:#BABED8">()</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">/**</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic"> * [Name] Entering method 'greet'.</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic"> * Hello, my name is Ron.</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic"> * [Name] Exiting method 'greet'.</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic"> **/</span></span></code></pre></figure>
<p>이로써 모든 함수에 <code>@loggedMethod</code>만 추가하면 쉽게 정해진 로그 메서드를 사용할수 있다.</p>
<p>이 외에도 컨택스트 객체에는 <code>addInitializer</code>라는 유용한 함수가 있다. 이는 생성자의 시작 부분(또는 정적 클래스 자체의 초기화)에 연결할 수 있다.</p>
<p>자바스크립트를 사용하면서 this가 다시 바인딩 되지 않도록 아래와 같은 코딩 스타일을 자주 사용한다.</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="material-theme-palenight"><code data-language="ts" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#C792EA">class</span><span style="color:#FFCB6B"> Person</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#F07178">  name</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#C792EA">  constructor</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">name</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#89DDFF">    this.</span><span style="color:#BABED8">name</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> name</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">    // 오직 CASE 1. 에만 사용되는 줄</span></span>
<span data-line=""><span style="color:#89DDFF">    this.</span><span style="color:#BABED8">greet</span><span style="color:#89DDFF"> =</span><span style="color:#89DDFF"> this.</span><span style="color:#BABED8">greet</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">bind</span><span style="color:#F07178">(</span><span style="color:#89DDFF">this</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#676E95;font-style:italic">  // CASE 1.</span></span>
<span data-line=""><span style="color:#F07178">  greet</span><span style="color:#89DDFF">()</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#BABED8">    console</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">log</span><span style="color:#F07178">(</span><span style="color:#89DDFF">`</span><span style="color:#C3E88D">Hello, my name is </span><span style="color:#89DDFF">${</span><span style="color:#89DDFF">this.</span><span style="color:#BABED8">name</span><span style="color:#89DDFF">}</span><span style="color:#C3E88D">.</span><span style="color:#89DDFF">`</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">  }</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  // CASE 2.</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  // greet: () =&gt; {</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  //   console.log(`Hello, my name is ${this.name}.`);</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  // }</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  // CASE 3. 생성자에서 this.greet.bind(this)를 하지 않은 경우</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  // greet() {</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  //   console.log(`Hello, my name is ${this.name}.`);</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  // }</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> greet </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> new</span><span style="color:#82AAFF"> Person</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">Ron</span><span style="color:#89DDFF">'</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">greet</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#82AAFF">greet</span><span style="color:#BABED8">()</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // CASE 1,2 는 정상적으로 동작하지만 3은 this가 글로벌로 바뀌기 때문에 name이 undefined 에러가 발생한다.</span></span></code></pre></figure>
<p>이를 데코레이터로 사용하면 일관된 로직을 추가/변경해 적용할수 있게 된다.</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="material-theme-palenight"><code data-language="ts" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#C792EA">function</span><span style="color:#82AAFF"> bound</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">originalMethod</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> any</span><span style="color:#89DDFF">,</span><span style="color:#BABED8;font-style:italic"> context</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> ClassMethodDecoratorContext</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#C792EA">  const</span><span style="color:#BABED8"> methodName</span><span style="color:#89DDFF"> =</span><span style="color:#82AAFF"> String</span><span style="color:#F07178">(</span><span style="color:#BABED8">context</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">name</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">  if</span><span style="color:#F07178"> (</span><span style="color:#BABED8">context</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">private</span><span style="color:#F07178">) </span><span style="color:#89DDFF">{</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">    // private 함수는 bind 하지 않는다는 예제</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">    throw</span><span style="color:#89DDFF"> new</span><span style="color:#82AAFF"> Error</span><span style="color:#F07178">(</span></span>
<span data-line=""><span style="color:#89DDFF">      `</span><span style="color:#C3E88D">'bound' cannot decorate private properties like </span><span style="color:#89DDFF">${</span><span style="color:#BABED8">methodName</span><span style="color:#89DDFF">}</span><span style="color:#C3E88D">.</span><span style="color:#89DDFF">`</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#F07178">    )</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">  }</span></span>
<span data-line=""><span style="color:#BABED8">  context</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">addInitializer</span><span style="color:#F07178">(</span><span style="color:#C792EA">function</span><span style="color:#89DDFF"> (</span><span style="color:#89DDFF;font-style:italic">this</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> any</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">    // 생성자에서 this를 바인드 하게 된다.</span></span>
<span data-line=""><span style="color:#89DDFF">    this</span><span style="color:#F07178">[</span><span style="color:#BABED8">methodName</span><span style="color:#F07178">] </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> this</span><span style="color:#F07178">[</span><span style="color:#BABED8">methodName</span><span style="color:#F07178">]</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">bind</span><span style="color:#F07178">(</span><span style="color:#89DDFF">this</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">  }</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C792EA">class</span><span style="color:#FFCB6B"> Person</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#F07178">  name</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#C792EA">  constructor</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">name</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#89DDFF">    this.</span><span style="color:#BABED8">name</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> name</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#676E95;font-style:italic">  // It Same: @bound @loggedMethod('[Name]') greet() { ... }</span></span>
<span data-line=""><span style="color:#89DDFF">  @</span><span style="color:#BABED8">bound</span></span>
<span data-line=""><span style="color:#89DDFF">  @</span><span style="color:#82AAFF">loggedMethod</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">[Name]</span><span style="color:#89DDFF">'</span><span style="color:#BABED8">)</span></span>
<span data-line=""><span style="color:#F07178">  greet</span><span style="color:#89DDFF">()</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#BABED8">    console</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">log</span><span style="color:#F07178">(</span><span style="color:#89DDFF">`</span><span style="color:#C3E88D">Hello, my name is </span><span style="color:#89DDFF">${</span><span style="color:#89DDFF">this.</span><span style="color:#BABED8">name</span><span style="color:#89DDFF">}</span><span style="color:#C3E88D">.</span><span style="color:#89DDFF">`</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">  }</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> greet </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> new</span><span style="color:#82AAFF"> Person</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">Ron</span><span style="color:#89DDFF">'</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">greet</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#82AAFF">greet</span><span style="color:#BABED8">()</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // It works!</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">/**</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic"> * [Name] Entering method 'greet'.</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic"> * Hello, my name is Ron.</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic"> * [Name] Exiting method 'greet'.</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic"> **/</span></span></code></pre></figure>
<p>여기서 유의할 점은 데코레이터는 '역순'으로 실행된다는 점이다. 위 예를 보면, <code>@loggedMethod</code>가 <code>greet</code> 메서드를 꾸미고, <code>@bound</code>가 <code>@loggedMethod</code>의 결과를 꾸미게 된다. 데코레이터가 사이드 이펙트를 가지거나 보장된 순서를 원할 경우 유의해야 한다.</p>
<h3 id="실험적-레거시-데코레이터와의-차이점" data-heading="true"><a data-heading="true" href="#실험적-레거시-데코레이터와의-차이점"><span class="icon icon-link"></span></a>실험적 레거시 데코레이터와의 차이점</h3>
<p>기존에 타입스크립트는 실험적 데코레이터를 지원하고 있었으며 <code>--experimentalDecorators</code> 옵션으로 활성화 할수 있었다.</p>
<p>실험적 데코레이터와 v5 데코레이터(ECMA)의 차이는 매개변수에 데코레이터를 지정하거나, <code>--emitDecoratorMetadata</code>와 호환되지 않는 등이 있다. 앞으로 데코레이터의 제안에 해당 내용들을 추가해 간격을 좁혀나갈 예정이다.</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="material-theme-palenight"><code data-language="ts" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#676E95;font-style:italic">// allowed</span></span>
<span data-line=""><span style="color:#89DDFF">@</span><span style="color:#BABED8">register</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">export</span><span style="color:#89DDFF;font-style:italic"> default</span><span style="color:#C792EA"> class</span><span style="color:#FFCB6B"> Foo</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  // ...</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#676E95;font-style:italic">// also allowed</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">export</span><span style="color:#89DDFF;font-style:italic"> default</span></span>
<span data-line=""><span style="color:#89DDFF">@</span><span style="color:#BABED8">register</span></span>
<span data-line=""><span style="color:#C792EA">class</span><span style="color:#FFCB6B"> Bar</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  // ...</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#676E95;font-style:italic">// error - before *and* after is not allowed</span></span>
<span data-line=""><span style="color:#89DDFF">@</span><span style="color:#BABED8">before</span></span>
<span data-line=""><span style="color:#89DDFF">@</span><span style="color:#BABED8">after</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">export</span><span style="color:#C792EA"> class</span><span style="color:#FFCB6B"> Bar</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  // ...</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span></code></pre></figure>
<p>데코레이터를 <code>export</code> 앞에 놓을 수 있게 되면서 다양하게 선언이 가능해졌지만, 양옆으로 놓을수는 없다.</p>
<p>데코레이터의 타입을 보장하기 위해서는 상당히 복잡한 타입정의가 될수 있다. 이는 가독성과 상충관계가 있기 때문에 단순하게 유지하라고 조언한다. 데코레이터의 메커니즘에 대해 자세한 내용은 <a class="underline-highlight-fade" target="_blank" href="https://2ality.com/2022/10/javascript-decorators.html" rel="noreferrer noopener">이 글</a>에 정리되어 있다.</p>
<h2 id="const-type-parameters" data-heading="true"><a data-heading="true" href="#const-type-parameters"><span class="icon icon-link"></span></a><a name="const-type-parameters"></a>const Type Parameters</h2>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="material-theme-palenight"><code data-language="ts" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#C792EA">type</span><span style="color:#FFCB6B"> HasNames</span><span style="color:#89DDFF"> =</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> names</span><span style="color:#89DDFF">:</span><span style="color:#C792EA"> readonly</span><span style="color:#FFCB6B"> string</span><span style="color:#BABED8">[] </span><span style="color:#89DDFF">};</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// 우리는 아래 함수를 통해 불변 문자열 배열 타입을 얻고자 한다.</span></span>
<span data-line=""><span style="color:#C792EA">function</span><span style="color:#82AAFF"> getNamesExactly</span><span style="color:#89DDFF">&lt;</span><span style="color:#FFCB6B">T</span><span style="color:#C792EA"> extends</span><span style="color:#FFCB6B"> HasNames</span><span style="color:#89DDFF">&gt;(</span><span style="color:#BABED8;font-style:italic">arg</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> T</span><span style="color:#89DDFF">):</span><span style="color:#FFCB6B"> T</span><span style="color:#BABED8">[</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">names</span><span style="color:#89DDFF">'</span><span style="color:#BABED8">] </span><span style="color:#89DDFF">{</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">  return</span><span style="color:#BABED8"> arg</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">names</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// The type we wanted:</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">//    readonly ["Alice", "Bob", "Eve"]</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// The type we got:</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">//    string[]</span></span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> names1 </span><span style="color:#89DDFF">=</span><span style="color:#82AAFF"> getNamesExactly</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">{</span><span style="color:#F07178"> names</span><span style="color:#89DDFF">:</span><span style="color:#BABED8"> [</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">Alice</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">Bob</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">Eve</span><span style="color:#89DDFF">'</span><span style="color:#BABED8">] </span><span style="color:#89DDFF">}</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#676E95;font-style:italic">// Correctly gets what we wanted:</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">//    readonly ["Alice", "Bob", "Eve"]</span></span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> names2 </span><span style="color:#89DDFF">=</span><span style="color:#82AAFF"> getNamesExactly</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">{</span><span style="color:#F07178"> names</span><span style="color:#89DDFF">:</span><span style="color:#BABED8"> [</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">Alice</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">Bob</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">Eve</span><span style="color:#89DDFF">'</span><span style="color:#BABED8">] </span><span style="color:#89DDFF">}</span><span style="color:#89DDFF;font-style:italic"> as</span><span style="color:#C792EA"> const</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span></code></pre></figure>
<p>객체의 타입을 추론할때 타입스크립트는 일반적인 타입을 선택한다. 따라서 위의 예에서 <code>names</code>는 <code>string[]</code> 타입으로 추론된다.</p>
<p>readonly 타입을 반환하게 할 경우 기존까지는 <code>as const</code> <a class="underline-highlight-fade" target="_blank" href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#type-assertions" rel="noreferrer noopener">타입 어설션</a>으로 강제화 해주어야 했는데, 이는 상당히 번거롭다.</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="material-theme-palenight"><code data-language="ts" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#C792EA">function</span><span style="color:#82AAFF"> getNamesExactly</span><span style="color:#89DDFF">&lt;</span><span style="color:#C792EA">const</span><span style="color:#FFCB6B"> T</span><span style="color:#C792EA"> extends</span><span style="color:#FFCB6B"> HasNames</span><span style="color:#89DDFF">&gt;(</span><span style="color:#BABED8;font-style:italic">arg</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> T</span><span style="color:#89DDFF">):</span><span style="color:#FFCB6B"> T</span><span style="color:#BABED8">[</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">names</span><span style="color:#89DDFF">'</span><span style="color:#BABED8">] </span><span style="color:#89DDFF">{</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  //                       ^^^^^</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">  return</span><span style="color:#BABED8"> arg</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">names</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// Inferred type: readonly ["Alice", "Bob", "Eve"]</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// Note: Didn't need to write 'as const' here</span></span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> names </span><span style="color:#89DDFF">=</span><span style="color:#82AAFF"> getNamesExactly</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">{</span><span style="color:#F07178"> names</span><span style="color:#89DDFF">:</span><span style="color:#BABED8"> [</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">Alice</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">Bob</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">Eve</span><span style="color:#89DDFF">'</span><span style="color:#BABED8">] </span><span style="color:#89DDFF">}</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span></code></pre></figure>
<p>이제 <code>const</code> 타입 파라미터를 사용해 <code>as const</code> 추론이 가능해졌다. 하지만 이는 함수 호출 내에 작성된 객체, 배열, 표현식에만 영향을 미치므로 주소값을 넘기는 인수로는 동작할수 없음을 알아두어야 한다.</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="material-theme-palenight"><code data-language="ts" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> inputNames </span><span style="color:#89DDFF">=</span><span style="color:#BABED8"> [</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">Alice</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">Bob</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">Eve</span><span style="color:#89DDFF">'</span><span style="color:#BABED8">]</span><span style="color:#89DDFF">;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#676E95;font-style:italic">// Inferred type: ["Alice", "Bob", "Eve"]</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// readonly 내놔!!!</span></span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> names </span><span style="color:#89DDFF">=</span><span style="color:#82AAFF"> getNamesExactly</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">{</span><span style="color:#F07178"> names</span><span style="color:#89DDFF">:</span><span style="color:#BABED8"> inputNames </span><span style="color:#89DDFF">}</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span></code></pre></figure>
<h2 id="supporting-multiple-configuration-files-in-extends" data-heading="true"><a data-heading="true" href="#supporting-multiple-configuration-files-in-extends"><span class="icon icon-link"></span></a><a name="supporting-multiple-configuration-files-in-extends"></a>Supporting Multiple Configuration Files in extends</h2>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="material-theme-palenight"><code data-language="ts" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#676E95;font-style:italic">// packages/front-end/src/tsconfig.json</span></span>
<span data-line=""><span style="color:#89DDFF">{</span></span>
<span data-line=""><span style="color:#89DDFF">  "</span><span style="color:#C3E88D">extends</span><span style="color:#89DDFF">"</span><span style="color:#F07178">: [</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">@tsconfig/strictest/tsconfig.json</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">../../../tsconfig.base.json</span><span style="color:#89DDFF">"</span><span style="color:#F07178">]</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#89DDFF">  "</span><span style="color:#C3E88D">compilerOptions</span><span style="color:#89DDFF">"</span><span style="color:#F07178">: </span><span style="color:#89DDFF">{</span></span>
<span data-line=""><span style="color:#89DDFF">      "</span><span style="color:#F07178">outDir</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">../lib</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">      // ...</span></span>
<span data-line=""><span style="color:#89DDFF">  }</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span></code></pre></figure>
<p>extends 필드에 배열로 여러개의 config 파일을 지원하게 되었다. 개인적으로 상당히 만족</p>
<h2 id="all-enums-are-union-enums" data-heading="true"><a data-heading="true" href="#all-enums-are-union-enums"><span class="icon icon-link"></span></a><a name="all-enums-are-union-enums"></a>All enums Are Union enums</h2>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="material-theme-palenight"><code data-language="ts" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#676E95;font-style:italic">// enum Color는 Red | Orange | Yellow | Green | Blue | Violet의 union 타입이다.</span></span>
<span data-line=""><span style="color:#C792EA">enum</span><span style="color:#FFCB6B"> Color</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#BABED8">  Red</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#BABED8">  Orange</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#BABED8">  Yellow</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#BABED8">  Green</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#BABED8">  Blue</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#BABED8">  Violet</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#676E95;font-style:italic">// enum 멤버는 참조할 수 있는 자체 유형이 있으므로 값처럼 사용될 수 있다.</span></span>
<span data-line=""><span style="color:#C792EA">type</span><span style="color:#FFCB6B"> PrimaryColor</span><span style="color:#89DDFF"> =</span><span style="color:#FFCB6B"> Color</span><span style="color:#89DDFF">.</span><span style="color:#FFCB6B">Red</span><span style="color:#89DDFF"> |</span><span style="color:#FFCB6B"> Color</span><span style="color:#89DDFF">.</span><span style="color:#FFCB6B">Green</span><span style="color:#89DDFF"> |</span><span style="color:#FFCB6B"> Color</span><span style="color:#89DDFF">.</span><span style="color:#FFCB6B">Blue</span><span style="color:#89DDFF">;</span></span></code></pre></figure>
<p>모든 enum은 union된 enum이다. 타입스크립트가 처음 enum을 도입했을 때만 해도 enum은 상수 집합에 불과했다(number 타입). 하지만 타입스크립트 2.0에서 enum 리터럴 타입(고유한 값; 상수 10, 20 등이 타입이 됨)이 도입되면서 리터럴 타입은 각 enum 멤버에 고유한 타입을 부여하게 된다.</p>
<p>각 enum 멤버에 고유한 타입을 부여할 때 발생하는 한 가지 문제는 해당 타입이 멤버의 실제 값과 연관되어 있다는 점이다.</p>
<p>예를 들어 아래와 같이 enum 멤버가 함수 호출로 초기화될 수 있는 경우, 값을 계산할수 없으므로 초기화 이전까지는 에러가 발생한다. 또한 <code>enum E</code>의 예시와 같이 <code>const a:E</code>는 <code>3 | 4</code>의 타입이 아닌 number가 된다. 이는 리터럴 타입의 장점을 사용하지 못하고 기존 상수 집합을 사용하고 있다는 뜻이 된다.</p>
<p>이제 타입스크립트 5버전 부터는 각 멤버에 대해 고유한 타입을 생성하여 enum 멤버를 union enum으로 사용할수 있게 되었다. <strong>즉, enum의 모든 멤버를 좁혀서 그 멤버를 타입으로 참조할 수 있게 되었다</strong>.</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="material-theme-palenight"><code data-language="ts" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#C792EA">enum</span><span style="color:#FFCB6B"> E</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#BABED8">  three </span><span style="color:#89DDFF">=</span><span style="color:#F78C6C"> 3</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#BABED8">  four </span><span style="color:#89DDFF">=</span><span style="color:#F78C6C"> 4</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span>
<span data-line=""><span style="color:#C792EA">function</span><span style="color:#82AAFF"> takeValue</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">num</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> E</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#676E95;font-style:italic">// v4.9.5 =====================================</span></span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> a</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> E</span><span style="color:#89DDFF"> =</span><span style="color:#F78C6C"> 55</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // It works!</span></span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> b</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> E</span><span style="color:#89DDFF">.</span><span style="color:#FFCB6B">three</span><span style="color:#89DDFF"> =</span><span style="color:#F78C6C"> 4444</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // It works!</span></span>
<span data-line=""><span style="color:#82AAFF">takeValue</span><span style="color:#BABED8">(</span><span style="color:#F78C6C">6</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // It works!</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C792EA">enum</span><span style="color:#FFCB6B"> Color</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#BABED8">  random </span><span style="color:#89DDFF">=</span><span style="color:#BABED8"> Math</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">random</span><span style="color:#BABED8">()</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#BABED8">  two </span><span style="color:#89DDFF">=</span><span style="color:#F78C6C"> 2</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// Error! Enum type 'Color' has members with initializers that are not literals.(2535)</span></span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> c</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> Color</span><span style="color:#89DDFF">.</span><span style="color:#FFCB6B">random</span><span style="color:#89DDFF"> =</span><span style="color:#F78C6C"> 5</span><span style="color:#89DDFF">;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#676E95;font-style:italic">// v5.0.3 =====================================</span></span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> a</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> E</span><span style="color:#89DDFF"> =</span><span style="color:#F78C6C"> 55</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // Error! Type '55' is not assignable to type 'E'.(2322)</span></span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> b</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> E</span><span style="color:#89DDFF">.</span><span style="color:#FFCB6B">three</span><span style="color:#89DDFF"> =</span><span style="color:#F78C6C"> 4444</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // Error! Type '4444' is not assignable to type 'E.three'.(2322)</span></span>
<span data-line=""><span style="color:#82AAFF">takeValue</span><span style="color:#BABED8">(</span><span style="color:#F78C6C">6</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // Error! Argument of type '6' is not assignable to parameter of type 'E'.(2345)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C792EA">enum</span><span style="color:#FFCB6B"> Color</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#BABED8">  random </span><span style="color:#89DDFF">=</span><span style="color:#BABED8"> Math</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">random</span><span style="color:#BABED8">()</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#BABED8">  two </span><span style="color:#89DDFF">=</span><span style="color:#F78C6C"> 2</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// It works!</span></span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> c</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> Color</span><span style="color:#89DDFF">.</span><span style="color:#FFCB6B">random</span><span style="color:#89DDFF"> =</span><span style="color:#F78C6C"> 5</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // number</span></span></code></pre></figure>
<h2 id="--moduleresolution-bundler" data-heading="true"><a data-heading="true" href="#--moduleresolution-bundler"><span class="icon icon-link"></span></a><a name="--moduleresolution-bundler"></a>--moduleResolution bundler</h2>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="json" data-theme="material-theme-palenight"><code data-language="json" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#89DDFF">{</span></span>
<span data-line=""><span style="color:#89DDFF">  "</span><span style="color:#C792EA">compilerOptions</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#89DDFF">    "</span><span style="color:#FFCB6B">target</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">esnext</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#89DDFF">    "</span><span style="color:#FFCB6B">moduleResolution</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">bundler</span><span style="color:#89DDFF">"</span></span>
<span data-line=""><span style="color:#89DDFF">  }</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span></code></pre></figure>
<p>대부분의 최신 번들러는 Node.js에서 ECMAScript 모듈과 CommonJS 조회 규칙의 융합을 사용한다. 번들러의 작동 방식을 모델링하기 위해 타입스크립트는 이제 새로운 전략인 --moduleResolution 번들러를 도입한다.</p>
<p>하이브리드 조회 전략을 구현하는 Vite, esbuild, swc, Webpack, Parcel 등의 최신 번들러를 사용 중이라면 새로운 bundler옵션이 적합하다.</p>
<h2 id="support-for-export-type-" data-heading="true"><a data-heading="true" href="#support-for-export-type-"><span class="icon icon-link"></span></a><a name="support-for-export-type-"></a>Support for export type *</h2>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="material-theme-palenight"><code data-language="ts" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#676E95;font-style:italic">// models/vehicles.ts</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">export</span><span style="color:#C792EA"> class</span><span style="color:#FFCB6B"> Spaceship</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  // ...</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#676E95;font-style:italic">// It works!</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// models/index.ts</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">export</span><span style="color:#89DDFF;font-style:italic"> type</span><span style="color:#89DDFF"> *</span><span style="color:#89DDFF;font-style:italic"> as</span><span style="color:#BABED8"> vehicles </span><span style="color:#89DDFF;font-style:italic">from</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">./vehicles</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#676E95;font-style:italic">// main.ts</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> vehicles</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">./models</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C792EA">function</span><span style="color:#82AAFF"> takeASpaceship</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">s</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> vehicles</span><span style="color:#89DDFF">.</span><span style="color:#FFCB6B">Spaceship</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  //  ok - `vehicles` only used in a type position</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C792EA">function</span><span style="color:#82AAFF"> makeASpaceship</span><span style="color:#89DDFF">()</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">  return</span><span style="color:#89DDFF"> new</span><span style="color:#BABED8"> vehicles</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">Spaceship</span><span style="color:#F07178">()</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  //         ^^^^^^^^</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  // 'vehicles' cannot be used as a value because it was exported using 'export type'.</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span></code></pre></figure>
<p>타입스크립트에서 <code>export type *</code> 문법이 가능해졌다. 이를 통해 타입과 값의 분리가 더 명확해졌다.</p>
<h2 id="overload-support-in-jsdoc" data-heading="true"><a data-heading="true" href="#overload-support-in-jsdoc"><span class="icon icon-link"></span></a><a name="overload-support-in-jsdoc"></a>@overload Support in JSDoc</h2>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="material-theme-palenight"><code data-language="ts" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#676E95;font-style:italic">// 기존에는 이와 같이 함수를 계속해서 확장해 나가야 했다.</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// Our overloads:</span></span>
<span data-line=""><span style="color:#C792EA">function</span><span style="color:#82AAFF"> printValue</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">str</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">):</span><span style="color:#FFCB6B"> void</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#C792EA">function</span><span style="color:#82AAFF"> printValue</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">num</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> number</span><span style="color:#89DDFF">,</span><span style="color:#BABED8;font-style:italic"> maxFractionDigits</span><span style="color:#89DDFF">?:</span><span style="color:#FFCB6B"> number</span><span style="color:#89DDFF">):</span><span style="color:#FFCB6B"> void</span><span style="color:#89DDFF">;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#676E95;font-style:italic">// 이제 아래와 같이 @overload 태그를 사용해 오버로드를 선언할 수 있다</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">/**</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic"> * </span><span style="color:#89DDFF;font-style:italic">@</span><span style="color:#C792EA;font-style:italic">overload</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic"> * </span><span style="color:#89DDFF;font-style:italic">@</span><span style="color:#C792EA;font-style:italic">param</span><span style="color:#89DDFF;font-style:italic"> {</span><span style="color:#FFCB6B;font-style:italic">string</span><span style="color:#89DDFF;font-style:italic">}</span><span style="color:#BABED8;font-style:italic"> value</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic"> * </span><span style="color:#89DDFF;font-style:italic">@</span><span style="color:#C792EA;font-style:italic">return</span><span style="color:#89DDFF;font-style:italic"> {</span><span style="color:#FFCB6B;font-style:italic">void</span><span style="color:#89DDFF;font-style:italic">}</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic"> */</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">/**</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic"> * </span><span style="color:#89DDFF;font-style:italic">@</span><span style="color:#C792EA;font-style:italic">overload</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic"> * </span><span style="color:#89DDFF;font-style:italic">@</span><span style="color:#C792EA;font-style:italic">param</span><span style="color:#89DDFF;font-style:italic"> {</span><span style="color:#FFCB6B;font-style:italic">number</span><span style="color:#89DDFF;font-style:italic">}</span><span style="color:#BABED8;font-style:italic"> value</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic"> * </span><span style="color:#89DDFF;font-style:italic">@</span><span style="color:#C792EA;font-style:italic">param</span><span style="color:#89DDFF;font-style:italic"> {</span><span style="color:#FFCB6B;font-style:italic">number</span><span style="color:#89DDFF;font-style:italic">}</span><span style="color:#89DDFF;font-style:italic"> [</span><span style="color:#BABED8;font-style:italic">maximumFractionDigits</span><span style="color:#89DDFF;font-style:italic">]</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic"> * </span><span style="color:#89DDFF;font-style:italic">@</span><span style="color:#C792EA;font-style:italic">return</span><span style="color:#89DDFF;font-style:italic"> {</span><span style="color:#FFCB6B;font-style:italic">void</span><span style="color:#89DDFF;font-style:italic">}</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic"> */</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">/**</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic"> * </span><span style="color:#89DDFF;font-style:italic">@</span><span style="color:#C792EA;font-style:italic">param</span><span style="color:#89DDFF;font-style:italic"> {</span><span style="color:#FFCB6B;font-style:italic">string | number</span><span style="color:#89DDFF;font-style:italic">}</span><span style="color:#BABED8;font-style:italic"> value</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic"> * </span><span style="color:#89DDFF;font-style:italic">@</span><span style="color:#C792EA;font-style:italic">param</span><span style="color:#89DDFF;font-style:italic"> {</span><span style="color:#FFCB6B;font-style:italic">number</span><span style="color:#89DDFF;font-style:italic">}</span><span style="color:#89DDFF;font-style:italic"> [</span><span style="color:#BABED8;font-style:italic">maximumFractionDigits</span><span style="color:#89DDFF;font-style:italic">]</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic"> */</span></span>
<span data-line=""><span style="color:#C792EA">function</span><span style="color:#82AAFF"> printValue</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">value</span><span style="color:#89DDFF">,</span><span style="color:#BABED8;font-style:italic"> maximumFractionDigits</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span><span style="color:#89DDFF"> ...</span><span style="color:#89DDFF"> }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#676E95;font-style:italic">// all allowed</span></span>
<span data-line=""><span style="color:#82AAFF">printValue</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">hello!</span><span style="color:#89DDFF">"</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#82AAFF">printValue</span><span style="color:#BABED8">(</span><span style="color:#F78C6C">123.45</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#82AAFF">printValue</span><span style="color:#BABED8">(</span><span style="color:#F78C6C">123.45</span><span style="color:#89DDFF">,</span><span style="color:#F78C6C"> 2</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#82AAFF">printValue</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">hello!</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#F78C6C"> 123</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // error!</span></span></code></pre></figure>
<p>기존에 코드로 표현해야 했던 부분을 jsdoc으로 나누어서 표현(example 등)할수 있기 때문에 DX의 향상에 기대가 된다.</p>
<h2 id="speed-memory-and-package-size-optimizations" data-heading="true"><a data-heading="true" href="#speed-memory-and-package-size-optimizations"><span class="icon icon-link"></span></a><a name="speed-memory-and-package-size-optimizations"></a>Speed, Memory, and Package Size Optimizations</h2>
<p></p><div class="img-container"><div class="img-wrap"><img src="https://github.com/1ilsang/dev/assets/23524849/fa74be28-12b4-4d85-bd7d-d9cbb3379029" alt="size"></div></div><p></p>
<p></p><div class="img-container"><div class="img-wrap"><img src="https://github.com/1ilsang/dev/assets/23524849/a6f4acaf-fa7f-4464-adab-7615b3ed0e77" alt="compare v5 to v4.9"></div></div><p></p>
<p></p><div class="img-container"><div class="img-wrap"><img src="https://github.com/1ilsang/dev/assets/23524849/2571eada-3035-42a1-9e35-1458c0b1d271" alt="typescript npm package size"></div></div><p></p>
<p>지표에서도 눈에 띄일만큼 변경사항이 있으며 원문 블로그 자체에서도 대부분의 코드베이스에서 10~20% 정도 속도 향상을 느낄 수 있다고 자신하고 있기 때문에 모노레포에서 타입 참조 시간을 많이 줄일수 있을 것이라 기대하고 있다.</p>
<h2 id="breaking-changes-and-deprecations" data-heading="true"><a data-heading="true" href="#breaking-changes-and-deprecations"><span class="icon icon-link"></span></a><a name="breaking-changes-and-deprecations"></a>Breaking Changes and Deprecations</h2>
<h3 id="runtime-requirements" data-heading="true"><a data-heading="true" href="#runtime-requirements"><span class="icon icon-link"></span></a>Runtime Requirements</h3>
<p>타입스크립트는 이제 ECMAScript 2018을 대상으로 한다. 최소 엔진은 12.20으로 설정되었다.</p>
<h3 id="libdts-changes" data-heading="true"><a data-heading="true" href="#libdts-changes"><span class="icon icon-link"></span></a>lib.d.ts Changes</h3>
<p>DOM의 유형이 생성되는 방식이 변경되어 기존 코드에 영향을 미칠 수 있다. 특히 특정 프로퍼티가 숫자에서 숫자 리터럴 타입으로 변환되었으며, 잘라내기, 복사, 붙여넣기 이벤트 처리를 위한 프로퍼티와 메서드가 인터페이스 전반으로 이동되었다.</p>
<h3 id="api-breaking-changes" data-heading="true"><a data-heading="true" href="#api-breaking-changes"><span class="icon icon-link"></span></a>API Breaking Changes</h3>
<p>TypeScript 5.0에서는 모듈로 전환하고, 불필요한 인터페이스를 제거했으며, 일부 정확성을 개선했다.</p>
<h3 id="forbidden-implicit-coercions-in-relational-operators" data-heading="true"><a data-heading="true" href="#forbidden-implicit-coercions-in-relational-operators"><span class="icon icon-link"></span></a>Forbidden Implicit Coercions in Relational Operators</h3>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="material-theme-palenight"><code data-language="ts" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#C792EA">function</span><span style="color:#82AAFF"> func</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">ns</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> number</span><span style="color:#89DDFF"> |</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">  return</span><span style="color:#BABED8"> ns</span><span style="color:#89DDFF"> *</span><span style="color:#F78C6C"> 4</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // Error, possible implicit coercion</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span>
<span data-line=""><span style="color:#C792EA">function</span><span style="color:#82AAFF"> func</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">ns</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> number</span><span style="color:#89DDFF"> |</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">  return</span><span style="color:#BABED8"> ns</span><span style="color:#89DDFF"> &gt;</span><span style="color:#F78C6C"> 4</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // Now also an error. number | string 타입은 비교할수 없다(string은 비교 불가능).</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span></code></pre></figure>
<p>TypeScript의 특정 연산은 암시적으로 문자열을 숫자로 강제 변환할 수 있는 코드를 작성할 경우 이미 경고한다. 5.0에서는 관계 연산자(&lt;,&gt;,&lt;=,=&gt;)에도 적용된다.</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="material-theme-palenight"><code data-language="ts" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#C792EA">function</span><span style="color:#82AAFF"> func</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">ns</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> number</span><span style="color:#89DDFF"> |</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">  return</span><span style="color:#89DDFF"> +</span><span style="color:#BABED8">ns</span><span style="color:#89DDFF"> &gt;</span><span style="color:#F78C6C"> 4</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // OK</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span></code></pre></figure>
<p><code>+</code> 연산자를 통해 명시적 형변환후 사용하는것은 가능하다.</p>
<h3 id="enum-overhaul" data-heading="true"><a data-heading="true" href="#enum-overhaul"><span class="icon icon-link"></span></a>Enum Overhaul</h3>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="material-theme-palenight"><code data-language="ts" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#C792EA">enum</span><span style="color:#FFCB6B"> SomeEvenDigit</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#BABED8">  Zero </span><span style="color:#89DDFF">=</span><span style="color:#F78C6C"> 0</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#BABED8">  Two </span><span style="color:#89DDFF">=</span><span style="color:#F78C6C"> 2</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#BABED8">  Four </span><span style="color:#89DDFF">=</span><span style="color:#F78C6C"> 4</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#676E95;font-style:italic">// Now correctly an error</span></span>
<span data-line=""><span style="color:#C792EA">let</span><span style="color:#BABED8"> m</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> SomeEvenDigit</span><span style="color:#89DDFF"> =</span><span style="color:#F78C6C"> 1</span><span style="color:#89DDFF">;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#676E95;font-style:italic">// =====</span></span>
<span data-line=""><span style="color:#C792EA">enum</span><span style="color:#FFCB6B"> Letters</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#BABED8">  A </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">a</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span>
<span data-line=""><span style="color:#C792EA">enum</span><span style="color:#FFCB6B"> Numbers</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#BABED8">  one </span><span style="color:#89DDFF">=</span><span style="color:#F78C6C"> 1</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#BABED8">  two </span><span style="color:#89DDFF">=</span><span style="color:#BABED8"> Letters</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">A</span><span style="color:#89DDFF">,</span><span style="color:#676E95;font-style:italic"> // enum의 참조가 있을 경우 number 타입으로 됨</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#676E95;font-style:italic">// Now correctly an error</span></span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> t</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> number</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> Numbers</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">two</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> t2</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> Numbers</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">two</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // 5.0 이전에는 여기서 에러가 발생함(-_-)</span></span></code></pre></figure>
<p>enum을 이해하는 개념 수를 줄이기 위해 위의 두 가지 오류가 추가되었다.</p>
<h2 id="마무리" data-heading="true"><a data-heading="true" href="#마무리"><span class="icon icon-link"></span></a>마무리</h2>
<p>decorator 추가 및 enum 명시성 확장, multi extends, jsdoc 등 다양한 편의성이 추가되었기 때문에 기대되는 메이저 업데이트이다.</p>
<p>이 글에서 다루지 않은 더 자세한 내용은 아래의 원문에 자세하게 추가되어 있다.</p>
<h2 id="참고" data-heading="true"><a data-heading="true" href="#참고"><span class="icon icon-link"></span></a>참고</h2>
<ul>
<li><a class="underline-highlight-fade" target="_blank" href="https://devblogs.microsoft.com/typescript/announcing-typescript-5-0" rel="noreferrer noopener">https://devblogs.microsoft.com/typescript/announcing-typescript-5-0</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-5-0.html" rel="noreferrer noopener">https://www.typescriptlang.org/docs/handbook/release-notes/typescript-5-0.html</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="https://ko.javascript.info/call-apply-decorators#ref-634" rel="noreferrer noopener">https://ko.javascript.info/call-apply-decorators#ref-634</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="https://2ality.com/2022/10/javascript-decorators.html" rel="noreferrer noopener">https://2ality.com/2022/10/javascript-decorators.html</a></li>
</ul></div><aside class="absolute inline-block h-full top-0 left-full break-words max-xl:hidden" aria-label="index"><ul class="ml-9 sticky pl-4 top-32 w-[calc(50vw-35vw)] border-l-2 border-l-base min-[1320px]:ml-20 min-[1320px]:top-48"><li data-id="decorators" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue">Decorators</li><li><ul class="ml-2.5 last:mb-2"><li data-id="실험적-레거시-데코레이터와의-차이점" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue before:content-['-'] before:mr-1">실험적 레거시 데코레이터와의 차이점</li></ul></li><li data-id="const-type-parameters" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue">const Type Parameters</li><li data-id="supporting-multiple-configuration-files-in-extends" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue">Supporting Multiple Configuration Files in extends</li><li data-id="all-enums-are-union-enums" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue">All enums Are Union enums</li><li data-id="--moduleresolution-bundler" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue">--moduleResolution bundler</li><li data-id="support-for-export-type-" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue">Support for export type *</li><li data-id="overload-support-in-jsdoc" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue">@overload Support in JSDoc</li><li data-id="speed-memory-and-package-size-optimizations" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue">Speed, Memory, and Package Size Optimizations</li><li data-id="breaking-changes-and-deprecations" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue">Breaking Changes and Deprecations</li><li><ul class="ml-2.5 last:mb-2"><li data-id="runtime-requirements" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue before:content-['-'] before:mr-1">Runtime Requirements</li><li data-id="libdts-changes" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue before:content-['-'] before:mr-1">lib.d.ts Changes</li><li data-id="api-breaking-changes" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue before:content-['-'] before:mr-1">API Breaking Changes</li><li data-id="forbidden-implicit-coercions-in-relational-operators" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue before:content-['-'] before:mr-1">Forbidden Implicit Coercions in Relational Operators</li><li data-id="enum-overhaul" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue before:content-['-'] before:mr-1">Enum Overhaul</li></ul></li><li data-id="마무리" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue">마무리</li><li data-id="참고" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue">참고</li></ul></aside></section><a class="highlighter mt-24 [&amp;&amp;]:text-transparent bg-rainbow-water bg-clip-text bg-[length:400%_400%] animate-rainbow-water" href="https://github.com/1ilsang/dev/issues/new?labels=🧊 comment&amp;assignees=1ilsang&amp;title=[🧊] TypeScript%205.0%20%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0&amp;body=<!-- 환영합니다. 이슈 남겨주시면 빠르게 답변드리겠습니다. 🙇 -->" rel="noopener noreferrer" target="_blank">📮 이 포스트에 관심 있으신가요? 이슈를 남겨주세요! 👍</a><div class="flex items-center mt-1.5 mb-56"><div>☕ 소주 한 잔 후원하기</div><sub>(예금주: 이상철)</sub><img class="w-20 cursor-pointer object-contain hover:animate-bouncing" src="/images/logo/toss-pay.webp" alt="toss"><img class="w-12 cursor-pointer object-contain hover:animate-bouncing" src="/images/logo/kakao-pay.webp" alt="kakao"></div></section><footer class="w-full h-screen flex"><div class="flex w-2/3 overflow-hidden"><div class="flex rotate-[40deg]"><div class="w-10 h-full bg-highlight brightness-125"></div><div class="w-10 h-full bg-snazzy-bg"></div></div><div class="flex rotate-[30deg]"><div class="w-10 h-full bg-highlight brightness-125"></div><div class="w-10 h-full bg-snazzy-bg"></div></div><div class="flex rotate-[0deg]"><div class="w-10 h-full bg-highlight brightness-125"></div><div class="w-10 h-full bg-snazzy-bg"></div></div><div class="flex rotate-[20deg]"><div class="w-10 h-full bg-highlight brightness-125"></div><div class="w-10 h-full bg-snazzy-bg"></div></div><div class="flex -rotate-[50deg]"><div class="w-10 h-full bg-highlight brightness-125"></div><div class="w-10 h-full bg-snazzy-bg"></div></div><div class="flex -rotate-[110deg]"><div class="w-10 h-full bg-highlight brightness-125"></div><div class="w-10 h-full bg-snazzy-bg"></div></div><div class="flex rotate-[20deg]"><div class="w-10 h-full bg-highlight brightness-125"></div><div class="w-10 h-full bg-snazzy-bg"></div></div><div class="flex -rotate-[90deg]"><div class="w-10 h-full bg-highlight brightness-125"></div><div class="w-10 h-full bg-snazzy-bg"></div></div><div class="flex -rotate-[60deg]"><div class="w-10 h-full bg-highlight brightness-125"></div><div class="w-10 h-full bg-snazzy-bg"></div></div><div class="flex rotate-[10deg]"><div class="w-10 h-full bg-highlight brightness-125"></div><div class="w-10 h-full bg-snazzy-bg"></div></div><div class="flex -rotate-[70deg]"><div class="w-10 h-full bg-highlight brightness-125"></div><div class="w-10 h-full bg-snazzy-bg"></div></div><div class="flex -rotate-[80deg]"><div class="w-10 h-full bg-highlight brightness-125"></div><div class="w-10 h-full bg-snazzy-bg"></div></div></div><ul class="w-1/3 text-center pt-[50vh]"><li class="text-white inline-block text-sm px-4 relative after:content-['•'] after:absolute after:right-[calc(0.2rem*-1)] last:after:content-['']"><a class="hover:text-highlight" href="/about">1ilsang</a></li><li class="text-white inline-block text-sm px-4 relative after:content-['•'] after:absolute after:right-[calc(0.2rem*-1)] last:after:content-['']"><a class="hover:text-highlight" href="https://github.com/1ilsang" rel="noopener noreferrer" target="_blank">GitHub</a></li><li class="text-white inline-block text-sm px-4 relative after:content-['•'] after:absolute after:right-[calc(0.2rem*-1)] last:after:content-['']"><a class="hover:text-highlight" href="https://www.linkedin.com/in/1ilsang" rel="noopener noreferrer" target="_blank">LinkedIn</a></li></ul></footer>