<div class="nav-loading"><progress value="0" max="1"></progress></div><nav class="nav flex-wrap water-rainbow post-nav-trans nav-shadow"><h2 class="tracking-tight focus:text-gray-700 text-2xl font-bold mt-2 mb-2 ml-3.5"><a class="hover-underline" href="/">1ilsang</a></h2><div class="flex"><h2 class="tracking-tight focus:text-gray-700 text-xl mt-2.5 mr-6"><a class="hover-underline" href="/posts">posts</a></h2><h2 class="tracking-tight focus:text-gray-700 text-xl mt-2.5 mr-6"><a class="hover-underline" href="/tags">tags</a></h2><div class="rounded-full mr-2 relative nav-avatar"><a href="/about"><img src="/assets/chul.png" alt="1ilsang"></a></div></div></nav><div class="post-container"><h1 class="post-header">Storybook 7.0 살펴보기</h1><div class="post-profile-container"><div class="flex items-center"><div class="rounded-full mr-2 relative avatar-image"><a href="/about"><img src="/assets/chul.png" alt="1ilsang"></a></div><div><a class="avatar-name" href="/about">1ilsang</a><div class="avatar-description">클라이밍 하실래염?</div></div></div></div><div class="flex flex-wrap mt-2 items-end"><a class="hashtag mr-2" target="_self" href="/tags/storybook">#<!-- -->storybook</a><a class="hashtag mr-2" target="_self" href="/tags/decorator">#<!-- -->decorator</a><a class="hashtag mr-2" target="_self" href="/tags/const">#<!-- -->const</a><a class="hashtag mr-2" target="_self" href="/tags/extends">#<!-- -->extends</a></div><div class="date-published"><time class="date-format" datetime="2023-08-13 19:17">2023-08-13 19:17</time> published</div><div class="post-body-container"><div class="markdown"><p></p><div class="img-container"><div class="img-wrap cover"><img src="https://github.com/1ilsang/dev/assets/23524849/c251c31e-1775-4cf9-9131-7cab72cde00e" alt="cover"></div></div><p></p>
<p>4월 초 Storybook v7이 공식 릴리즈 되었다. 이 포스트에서는 <a class="underline-highlight-fade" target="_blank" href="https://storybook.js.org/blog/storybook-7-0/" rel="noreferrer noopener">스토리북 블로그에 작성된</a> 7버전의 기능들을 확인해보고 정리해 보고자 한다.</p>
<h2 id="tldr" data-heading="true"><a data-heading="true" href="#tldr"><span class="icon icon-link"></span></a>TL;DR!</h2>
<ul>
<li>사전 번들 제공으로 DX 향상</li>
<li>Webpack4 -&gt; Webpack5</li>
<li>CSF(Component Story Format) v3 업데이트로 인한 스토리 Props 직관성 향상</li>
<li>MDX v2 지원</li>
<li>Vite, NextJS, SvelteKit 지원</li>
<li>컴포넌트 테스트 지원 향상</li>
</ul>
<h2 id="사전-번들-제공" data-heading="true"><a data-heading="true" href="#사전-번들-제공"><span class="icon icon-link"></span></a>사전 번들 제공</h2>
<p>Storybook v7의 주요 기능중 가장 마음에 드는 부분은 사전 번들 제공이다.</p>
<p>기존에 v6을 사용할 때에는 Storybook도 번들링되기 때문에 번들 시간이 상당히 길었다. 하지만 이번 업데이트로 번들링된 파일이 제공되므로 Storybook의 번들 시간이 없어졌고 연계된 에드온 또한 런타임 부담 없이 더 안정적으로 사용할수 있게 되었다.</p>
<p>또한 Webpack또한 v4에서 v5로 업데이트 되었기 때문에 번들 속도는 더욱 빨라졌다.</p>
<p></p><div class="img-container"><div class="img-wrap"><img src="https://github.com/1ilsang/dev/assets/23524849/260e2d5a-9a95-4334-a5fe-68885fc35df0" alt="compare-speed"></div></div><p></p>
<blockquote>
<p>20초 걸리던 매니저 빌드 타임이 사전 번들 덕분에 1초대로 줄었으며 프리뷰 영역도 2초 정도 단축되었다. wow</p>
</blockquote>
<h2 id="csf-v3" data-heading="true"><a data-heading="true" href="#csf-v3"><span class="icon icon-link"></span></a>CSF v3</h2>
<p>Component Story Format(CSF)도 상당 부분 변경되었다. 컴포넌트 형식에 맞춰 통일화된 규격을 제공한다.</p>
<ol>
<li>stories 파일의 <code>default export</code>가 변경되었다. 이제 스토리 메타데이터를 정의하는 객체를 리턴한다.</li>
<li>stories 정의 방식이 변경되었다. 스토리는 스토리 메타데이터 객체 내부에 정의되어야 한다.</li>
<li>stories 템플릿을 제공한다. 템플릿으로 스토리를 정의할수 있기 때문에 재사용성이 향상되었다.</li>
<li>stories 이름을 정의하는 방식이 변경되었다. id, title 값이 메타데이터 객체로 들어오게 되었다.</li>
</ol>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="js" data-theme="material-theme-palenight"><code data-language="js" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#676E95;font-style:italic">// v6 {id}.stories.tsx</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">export</span><span style="color:#C792EA"> const</span><span style="color:#BABED8"> Pair </span><span style="color:#89DDFF">=</span><span style="color:#BABED8"> Template</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">bind</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">{}</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#BABED8">Pair</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">argTypes </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#F07178">  type</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#F07178">    options</span><span style="color:#89DDFF">:</span><span style="color:#BABED8"> [</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">mobile</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">pc</span><span style="color:#89DDFF">'</span><span style="color:#BABED8">]</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#F07178">    control</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> type</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">radio</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF"> },</span></span>
<span data-line=""><span style="color:#F07178">    defaultValue</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">mobile</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#89DDFF">  },</span></span>
<span data-line=""><span style="color:#F07178">  slot</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#F07178">    options</span><span style="color:#89DDFF">:</span><span style="color:#BABED8"> [</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">header</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">toolbar left</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">toolbar right</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">more</span><span style="color:#89DDFF">'</span><span style="color:#BABED8">]</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#F07178">    control</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> type</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">radio</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF"> },</span></span>
<span data-line=""><span style="color:#F07178">    defaultValue</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">header</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#89DDFF">  },</span></span>
<span data-line=""><span style="color:#89DDFF">};</span></span>
<span data-line=""><span style="color:#BABED8">Pair</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">args </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  /* ... */</span></span>
<span data-line=""><span style="color:#89DDFF">};</span></span>
<span data-line=""><span style="color:#BABED8">Pair</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">parameter </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  /* ... */</span></span>
<span data-line=""><span style="color:#89DDFF">};</span></span>
<span data-line=""><span style="color:#BABED8">Pair</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">action </span><span style="color:#89DDFF">=</span><span style="color:#82AAFF"> clickPair</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">toolbar</span><span style="color:#89DDFF">'</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#676E95;font-style:italic">// v7 {id}.stories.tsx</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">export</span><span style="color:#89DDFF;font-style:italic"> default</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#F07178">  title</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">Buttons/color</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#F07178">  argTypes</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#F07178">    type</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#F07178">      options</span><span style="color:#89DDFF">:</span><span style="color:#BABED8"> [</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">mobile</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">pc</span><span style="color:#89DDFF">'</span><span style="color:#BABED8">]</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#F07178">      control</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> type</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">radio</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF"> },</span></span>
<span data-line=""><span style="color:#89DDFF">    },</span></span>
<span data-line=""><span style="color:#F07178">    slot</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#F07178">      options</span><span style="color:#89DDFF">:</span><span style="color:#BABED8"> [</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">header</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">toolbar left</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">toolbar right</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">more</span><span style="color:#89DDFF">'</span><span style="color:#BABED8">]</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#F07178">      control</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> type</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">radio</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF"> },</span></span>
<span data-line=""><span style="color:#89DDFF">    },</span></span>
<span data-line=""><span style="color:#89DDFF">  },</span></span>
<span data-line=""><span style="color:#89DDFF">};</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">export</span><span style="color:#C792EA"> const</span><span style="color:#BABED8"> Pair </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#F07178">  name</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">Pair</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#F07178">  action</span><span style="color:#89DDFF">:</span><span style="color:#82AAFF"> clickPair</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">toolbar</span><span style="color:#89DDFF">'</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#F07178">  render</span><span style="color:#89DDFF">:</span><span style="color:#BABED8"> Template</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#F07178">  args</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#F07178">    type</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">mobile</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#F07178">    slot</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">header</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#89DDFF">  },</span></span>
<span data-line=""><span style="color:#F07178">  parameter</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">    /* ... */</span></span>
<span data-line=""><span style="color:#89DDFF">  },</span></span>
<span data-line=""><span style="color:#89DDFF">};</span></span></code></pre></figure>
<h2 id="mdx-v2" data-heading="true"><a data-heading="true" href="#mdx-v2"><span class="icon icon-link"></span></a>MDX v2</h2>
<p></p><div class="img-container"><div class="img-wrap l"><img src="https://github.com/1ilsang/dev/assets/23524849/cce48ea1-146f-47fb-a6a9-52d5eea4dc1b" alt="MDX"></div></div><p></p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="jsx" data-theme="material-theme-palenight"><code data-language="jsx" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#676E95;font-style:italic">// v6 guide.stories.mdx</span></span>
<span data-line=""><span style="color:#89DDFF">&lt;</span><span style="color:#FFCB6B">Meta</span><span style="color:#C792EA"> title</span><span style="color:#89DDFF">=</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">Component/Title/Guide</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF"> /&gt;</span></span>
<span data-line=""><span style="color:#89DDFF">&lt;</span><span style="color:#FFCB6B">Story</span><span style="color:#C792EA"> id</span><span style="color:#89DDFF">=</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">component-title--red-title</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF"> /&gt;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#676E95;font-style:italic">// v7 guide.mdx</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#BABED8"> TitleGuide</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8">RedTitle</span><span style="color:#89DDFF">}</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">./Component/TitleGuide</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">&lt;</span><span style="color:#FFCB6B">Meta</span><span style="color:#C792EA"> of</span><span style="color:#89DDFF">={</span><span style="color:#BABED8">TitleGuide</span><span style="color:#89DDFF">} /&gt;</span></span>
<span data-line=""><span style="color:#89DDFF">&lt;</span><span style="color:#FFCB6B">Story</span><span style="color:#C792EA"> of</span><span style="color:#89DDFF">={</span><span style="color:#BABED8">RedTitle</span><span style="color:#89DDFF">} /&gt;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#676E95;font-style:italic">// ./Component/TitleGuide.stories.mdx</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">export</span><span style="color:#C792EA"> const</span><span style="color:#BABED8"> RedTitle </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> {</span><span style="color:#676E95;font-style:italic"> /* ... */</span><span style="color:#89DDFF"> };</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">export</span><span style="color:#89DDFF;font-style:italic"> default</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#F07178">  title</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">Component/Title/Guide</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#89DDFF">};</span></span></code></pre></figure>
<p>v7이 되면서 MDX1에서 MDX2로 업데이트 되었다.</p>
<p>기존에는 mdx 파일과 스토리 파일을 ID 스트링으로 연결했었다. v7 부터는 조금 더 코드 친화적으로 컴포넌트와 문서를 이어줄 수 있게 되었다.</p>
<p>MDX2는 내장 jsx 및 플러그인을 지원하기 때문에 동적인 문서를 만들기에 더욱 좋아졌다.</p>
<p>확장자에 변화도 생겼다. <code>{name}.stories.mdx</code>와 같이 닷(.)으로 이어진 확장자는 인식하지 못한다. <code>{name}.mdx</code>로 파일명 수정이 필요하다.</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="jsx" data-theme="material-theme-palenight"><code data-language="jsx" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#89DDFF">|</span><span style="color:#BABED8">   name   </span><span style="color:#89DDFF">|</span><span style="color:#BABED8">       type       </span><span style="color:#89DDFF">|</span><span style="color:#BABED8">    description     </span><span style="color:#89DDFF">|</span></span>
<span data-line=""><span style="color:#89DDFF">|</span><span style="color:#BABED8"> :</span><span style="color:#89DDFF">------</span><span style="color:#BABED8">: </span><span style="color:#89DDFF">|</span><span style="color:#BABED8"> :</span><span style="color:#89DDFF">--------------</span><span style="color:#BABED8">: </span><span style="color:#89DDFF">|</span><span style="color:#BABED8"> :</span><span style="color:#89DDFF">----------------</span><span style="color:#BABED8">: </span><span style="color:#89DDFF">|</span></span>
<span data-line=""><span style="color:#89DDFF">|</span><span style="color:#BABED8"> videoRef </span><span style="color:#89DDFF">|</span><span style="color:#BABED8"> HTMLVideoElement </span><span style="color:#89DDFF">|</span><span style="color:#BABED8">   video element    </span><span style="color:#89DDFF">|</span></span>
<span data-line=""><span style="color:#89DDFF">|</span><span style="color:#BABED8">  event   </span><span style="color:#89DDFF">|</span><span style="color:#BABED8">    MouseEvent    </span><span style="color:#89DDFF">|</span><span style="color:#BABED8"> click event object </span><span style="color:#89DDFF">|</span></span></code></pre></figure>
<p>기본적으로 MDX는 <a class="underline-highlight-fade" target="_blank" href="https://github.github.com/gfm/" rel="noreferrer noopener">GitHub-flavored markdown(GFM)</a>이 꺼져있으므로 위와 같은 테이블 마크다운이 깨질 수 있다.</p>
<p>이는 <a class="underline-highlight-fade" target="_blank" href="https://storybook.js.org/docs/react/writing-docs/mdx#lack-of-github-flavored-markdown-gfm" rel="noreferrer noopener">remarkGfm을 설치하여 수정</a>하여야 한다.</p>
<h2 id="그-외" data-heading="true"><a data-heading="true" href="#그-외"><span class="icon icon-link"></span></a>그 외</h2>
<p></p><div class="img-container"><div class="img-wrap l"><img src="https://github.com/1ilsang/dev/assets/23524849/6c81a754-b986-439f-8e72-514c723c853d" alt="support"></div></div><p></p>
<p>설정 수정 없이 Vite, NextJS, SvelteKit을 지원한다.</p>
<p>본인은 Webpack에서 Vite로 마이그레이션을 고려하고 있었는데 이번 버전이 좋은 기회가 될꺼라 기대하고 있다.</p>
<p></p><div class="img-container"><div class="img-wrap l"><img src="https://github.com/1ilsang/dev/assets/23524849/72e2d169-6801-4270-9447-2984b292ec57" alt="test-coverage"></div></div><p></p>
<p>스토리북은 이전부터 테스팅 도구로써의 포지션을 견고히 하고자 하는데, 이번 버전에서도 상당부분 업데이트가 되어 있다.</p>
<p>v7에는 코드 커버리지 기능이 추가되었다. 테스트 코드의 누락을 조금 더 쉽게 찾을수 있게 되었다.</p>
<p></p><div class="img-container"><div class="img-wrap l"><img src="https://github.com/1ilsang/dev/assets/23524849/74ab1c8c-e5f9-4926-bbf7-56c4e676323a" alt="test"></div></div><p></p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="tsx" data-theme="material-theme-palenight"><code data-language="tsx" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> meta</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> Meta</span><span style="color:#89DDFF">&lt;typeof</span><span style="color:#BABED8"> SignupForm</span><span style="color:#89DDFF">&gt;</span><span style="color:#89DDFF"> =</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#F07178">  title</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">SignupForm</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#F07178">  component</span><span style="color:#89DDFF">:</span><span style="color:#BABED8"> SignupForm</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#89DDFF">};</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">export</span><span style="color:#89DDFF;font-style:italic"> default</span><span style="color:#BABED8"> meta</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#C792EA">type</span><span style="color:#FFCB6B"> Story</span><span style="color:#89DDFF"> =</span><span style="color:#FFCB6B"> StoryObj</span><span style="color:#89DDFF">&lt;typeof</span><span style="color:#BABED8"> SignupForm</span><span style="color:#89DDFF">&gt;;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">export</span><span style="color:#C792EA"> const</span><span style="color:#BABED8"> Submitted</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> Story</span><span style="color:#89DDFF"> =</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#82AAFF">  play</span><span style="color:#89DDFF">:</span><span style="color:#C792EA"> async</span><span style="color:#89DDFF"> ({</span><span style="color:#BABED8;font-style:italic"> args</span><span style="color:#89DDFF">,</span><span style="color:#BABED8;font-style:italic"> canvasElement</span><span style="color:#89DDFF">,</span><span style="color:#BABED8;font-style:italic"> step</span><span style="color:#89DDFF"> })</span><span style="color:#C792EA"> =&gt;</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#C792EA">    const</span><span style="color:#BABED8"> canvas</span><span style="color:#89DDFF"> =</span><span style="color:#82AAFF"> within</span><span style="color:#F07178">(</span><span style="color:#BABED8">canvasElement</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">    await</span><span style="color:#82AAFF"> step</span><span style="color:#F07178">(</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">Enter email and password</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span><span style="color:#C792EA"> async</span><span style="color:#89DDFF"> ()</span><span style="color:#C792EA"> =&gt;</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">      await</span><span style="color:#BABED8"> userEvent</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">type</span><span style="color:#F07178">(</span><span style="color:#BABED8">canvas</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">getByTestId</span><span style="color:#F07178">(</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">email</span><span style="color:#89DDFF">'</span><span style="color:#F07178">)</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">hi@example.com</span><span style="color:#89DDFF">'</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">      await</span><span style="color:#BABED8"> userEvent</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">type</span><span style="color:#F07178">(</span><span style="color:#BABED8">canvas</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">getByTestId</span><span style="color:#F07178">(</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">password</span><span style="color:#89DDFF">'</span><span style="color:#F07178">)</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">supersecret</span><span style="color:#89DDFF">'</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">    }</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">    await</span><span style="color:#82AAFF"> step</span><span style="color:#F07178">(</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">Submit form</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span><span style="color:#C792EA"> async</span><span style="color:#89DDFF"> ()</span><span style="color:#C792EA"> =&gt;</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">      await</span><span style="color:#BABED8"> userEvent</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">click</span><span style="color:#F07178">(</span><span style="color:#BABED8">canvas</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">getByRole</span><span style="color:#F07178">(</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">button</span><span style="color:#89DDFF">'</span><span style="color:#F07178">))</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">    }</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">  },</span></span>
<span data-line=""><span style="color:#89DDFF">};</span></span></code></pre></figure>
<p>기존의 <code>play</code> 함수에서 추가된 <code>step</code>을 활용해 컴포넌트 테스트의 그룹화가 가능해졌다.</p>
<p>테스트 그룹을 통해 해당 테스트를 사람이 이해하기 편해졌다.</p>
<h2 id="마무리" data-heading="true"><a data-heading="true" href="#마무리"><span class="icon icon-link"></span></a>마무리</h2>
<p>Storybook v7은 전반적으로 Developer Experience 향상이 눈에 보이므로 스토리북을 지속적으로 사용할 계획이라면 업데이트 하는것이 좋아보인다.</p>
<ol>
<li>빨라진 빌드 시간</li>
<li>개발자 친화적으로 변화한 CSF, MDX</li>
<li>테스트 그룹화 지원으로 그룹 단위 테스트가 가능해졌다.</li>
</ol>
<h2 id="참고" data-heading="true"><a data-heading="true" href="#참고"><span class="icon icon-link"></span></a>참고</h2>
<ul>
<li><a class="underline-highlight-fade" target="_blank" href="https://storybook.js.org/blog/storybook-7-0/" rel="noreferrer noopener">https://storybook.js.org/blog/storybook-7-0/</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="https://storybook.js.org/blog/storybook-7-docs/" rel="noreferrer noopener">https://storybook.js.org/blog/storybook-7-docs/</a></li>
</ul></div><aside class="floating-container"><ul class="list"><li data-id="tldr" class="item">TL;DR!</li><li data-id="사전-번들-제공" class="item">사전 번들 제공</li><li data-id="csf-v3" class="item">CSF v3</li><li data-id="mdx-v2" class="item">MDX v2</li><li data-id="그-외" class="item">그 외</li><li data-id="마무리" class="item">마무리</li><li data-id="참고" class="item">참고</li></ul></aside></div><a class="highlighter issue-post" href="https://github.com/1ilsang/dev/issues/new?labels=🧊 comment&amp;assignees=1ilsang&amp;title=[🧊] Storybook%207.0%20%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0&amp;body=<!-- 환영합니다. 이슈 남겨주시면 빠르게 답변드리겠습니다. 🙇 -->" rel="noopener noreferrer" target="_blank">📮 이 포스트에 관심 있으신가요? 이슈를 남겨주세요! 👍</a></div><footer class="footer"><ul><li><a href="/about">1ilsang</a></li><li><a rel="noopener noreferrer" target="_blank" href="https://github.com/1ilsang">GitHub</a></li><li><a href="https://www.linkedin.com/in/1ilsang" rel="noopener noreferrer" target="_blank">LinkedIn</a></li></ul></footer>