<progress
  class="[&amp;::-webkit-progress-bar]:bg-sub-blue fixed top-0 left-0 z-10 w-full h-[3px] appearance-none [&amp;::-webkit-progress-value]:bg-base-og"
  value="0"
  max="1"
></progress>
<nav
  class="fixed z-40 flex flex-wrap w-full justify-between justify-items-center hover:animate-rainbow-water hover:bg-nav hover:bg-[length:400%_400%] opacity-10 md:opacity-100 shadow-nav shadow-lg"
>
  <h2 class="tracking-tight mr-6 text-2xl font-bold my-2 ml-3.5">
    <a class="hover:underline" href="/">1ilsang</a>
  </h2>
  <div class="flex">
    <h2 class="tracking-tight mr-6 text-xl mt-2.5">
      <a class="hover:underline" href="/posts">posts</a>
    </h2>
    <h2 class="tracking-tight mr-6 text-xl mt-2.5">
      <a class="hover:underline" href="/tags">tags</a>
    </h2>
    <div class="mr-2 w-8 h-8 mt-2" role="img" aria-label="1ilsang character">
      <a href="/about"
        ><img
          class="border border-solid rounded-full border-white-blue"
          src="/images/chul.webp"
          alt="1ilsang"
      /></a>
    </div>
  </div>
</nav>
<section
  class="h-auto min-h-full max-w-(--breakpoint-md) py-20 md:py-28 mx-4 min-[790px]:m-auto print:py-0"
>
  <h1 class="text-4xl break-words md:text-6xl">
    N-API(Node-API) 얕게 알아보기(feat. Rust)
  </h1>
  <section class="flex items-center mt-4">
    <div
      class="mr-2 w-9 h-9 md:w-12 md:h-12"
      role="img"
      aria-label="1ilsang character"
    >
      <a href="/about"
        ><img
          class="border border-solid rounded-full border-sub-blue"
          src="/images/chul.webp"
          alt="1ilsang"
      /></a>
    </div>
    <div>
      <a class="text-lg" href="/about">1ilsang</a>
      <div class="text-sm text-sub-blue">클라이밍 하실래염?</div>
    </div>
  </section>
  <section class="flex flex-wrap items-end mt-2">
    <a
      class="text-highlight print:text-black hover:underline mr-2"
      target="_self"
      href="/tags/nodejs"
      >#<!-- -->nodejs</a
    ><a
      class="text-highlight print:text-black hover:underline mr-2"
      target="_self"
      href="/tags/addon"
      >#<!-- -->addon</a
    ><a
      class="text-highlight print:text-black hover:underline mr-2"
      target="_self"
      href="/tags/node-api"
      >#<!-- -->node-api</a
    ><a
      class="text-highlight print:text-black hover:underline mr-2"
      target="_self"
      href="/tags/rust"
      >#<!-- -->rust</a
    >
  </section>
  <section>
    <div class="inline text-date-gray">
      <span class="mr-1">Published</span
      ><time datetime="2025-03-16 21:37">2025-03-16 21:37</time>
    </div>
  </section>
  <section id="post-body-container" class="relative">
    <div class="markdown">
      <div class="img-container">
        <div
          class="flex justify-center min-h-[200px] mt-3 mb-3 w-full h-[600px] object-contain bg-transparent mt-10"
        >
          <img
            class="w-full h-full cursor-zoom-in object-contain max-h-[550px]"
            alt="cover"
            src="/posts/n-api/cover.webp"
          />
        </div>
      </div>
      <blockquote
        class="pl-4 text-[#8b949e] border-l-[0.25rem] border-[#425061]"
      >
        <p class="mt-4 mb-4">
          이미지 출처:
          <a
            href="https://medium.com/ai-innovation/a-guide-for-javascript-developers-to-build-c-add-ons-with-node-addon-api-28c84a0c0cb1"
            class="underline-highlight-fade"
            target="_blank"
            rel="noreferrer noopener"
            >https://medium.com/ai-innovation/a-guide-for-javascript-developers-to-build-c-add-ons-with-node-addon-api-28c84a0c0cb1</a
          >
        </p>
      </blockquote>
      <p class="mt-4 mb-4">
        최근 Rust를 공부하면서 Rust 컴파일 파일이 Node.js Addon에 어떻게
        연결되는지 궁금했다. 따라서 이번 기회에 N-API에 대해 "얕게" 알아보려고
        한다.
      </p>
      <p class="mt-4 mb-4">이 글은 다음과 같은 내용을 다룬다.</p>
      <ol class="min-[790px]:ml-6 ml-4 list-decimal">
        <li>Node-API란?</li>
        <li>Node-API의 장점</li>
        <li>Rust와 N-API를 사용한 Node.js Addon 개발</li>
      </ol>
      <p class="mt-4 mb-4">
        <a
          href="https://medium.com/@nodejs/renaming-n-api-to-node-api-27aa8ca30ed8"
          class="underline-highlight-fade"
          target="_blank"
          rel="noreferrer noopener"
          >N-API는 2021년 Node-API로 이름이 변경</a
        >되었다. 따라서 앞으로는 Node-API로 표기하겠다.
      </p>
      <h2
        id="node-api란"
        class="font-semibold leading-snug pb-0.5 pt-6 mb-2 group text-3xl mt-12 border-b border-[hsl(210deg_18%_87%_/100%)]"
      >
        <a aria-hidden="true" tabindex="-1" href="#node-api란"
          ><span
            class="icon icon-link opacity-0 group-hover:opacity-100 ease-in-out transition-opacity duration-300 before:absolute before:w-[40px] before:left-[-25px] before:content-[&quot;⧉&quot;] before:text-[#61768f] before:mr-2"
          ></span></a
        >Node-API란?
      </h2>
      <div class="img-container">
        <div class="flex justify-center min-h-[200px] mt-3 mb-3 w-full">
          <img
            class="w-full h-full cursor-zoom-in object-contain max-h-[550px]"
            alt="node-api flow"
            src="/posts/n-api/flow.webp"
          />
        </div>
      </div>
      <p class="mt-4 mb-4">
        Node-API는
        <a
          href="https://nodejs.org/docs/latest-v8.x/api/n-api.html#n_api_n_api"
          class="underline-highlight-fade"
          target="_blank"
          rel="noreferrer noopener"
          >Node.js v8에서 Stable로 소개</a
        >되었다.
      </p>
      <p class="mt-4 mb-4">
        Node-API는 Node.js 네이티브 Addon(C/C++)을 개발하기 위한 API이다. 기본
        JavaScript 런타임(예: V8)과 독립적이며 Node.js 자체의 일부로 유지
        관리되고 있다.
      </p>
      <p class="mt-4 mb-4">
        이 API는 Node.js의 모든 버전에서
        <a
          href="https://nodejs.org/en/learn/modules/abi-stability"
          class="underline-highlight-fade"
          target="_blank"
          rel="noreferrer noopener"
          >ABI 안정적</a
        >이다.
      </p>
      <blockquote
        class="pl-4 text-[#8b949e] border-l-[0.25rem] border-[#425061]"
      >
        <p class="mt-4 mb-4">
          ABI(Application Binary Interface): 응용 프로그램이 컴파일된 이후에도
          호환성을 유지하기 위한 인터페이스.
        </p>
      </blockquote>
      <p class="mt-4 mb-4">
        기본 JavaScript 엔진의 변경 사항으로부터 Addon을 보호하고 특정 버전에
        대해 컴파일된 모듈을 재컴파일 없이 이후 버전의 Node.js에서 실행할 수
        있도록 하는 것이 목적이다.
      </p>
      <h2
        id="node-api의-장점"
        class="font-semibold leading-snug pb-0.5 pt-6 mb-2 group text-3xl mt-12 border-b border-[hsl(210deg_18%_87%_/100%)]"
      >
        <a aria-hidden="true" tabindex="-1" href="#node-api의-장점"
          ><span
            class="icon icon-link opacity-0 group-hover:opacity-100 ease-in-out transition-opacity duration-300 before:absolute before:w-[40px] before:left-[-25px] before:content-[&quot;⧉&quot;] before:text-[#61768f] before:mr-2"
          ></span></a
        >Node-API의 장점
      </h2>
      <div class="img-container">
        <div class="flex justify-center min-h-[200px] mt-3 mb-3 w-full">
          <img
            class="w-full h-full cursor-zoom-in object-contain max-h-[550px]"
            alt="addon chart"
            src="/posts/n-api/addon.webp"
          />
        </div>
      </div>
      <p class="mt-4 mb-4">
        Node-API가 탄생한 배경을 이해하면 Node-API의 장점을 이해할 수 있다.
      </p>
      <p class="mt-4 mb-4">
        Node.js는 JavaScript를 브라우저 외부에서 실행시킬 수 있는 앱이다. 따라서
        다양한 기능을 충족시키기 위해 C/C++ 네이티브 Addon을 통해 Node.js를
        확장시키고자 하는 노력을 기울여 왔다.
      </p>
      <p class="mt-4 mb-4">
        이러한 노력은 유지보수의 어려움이 있었다. 내부적으로 의존하는 V8 엔진 및
        Libuv 등은 지속적으로 업데이트되며 새로운 기능이 추가되거나 변경된다.
        이러한 변화는 C/C++로 개발된 Addon의 ABI 안정성을 보장하기 어렵게
        만들었다.
      </p>
      <blockquote
        class="pl-4 text-[#8b949e] border-l-[0.25rem] border-[#425061]"
      >
        <p class="mt-4 mb-4">
          Addon C++에서 V8에 직접 접근한 경우 Node.js는 안정성을 보장할 방법이
          없기 때문.
        </p>
      </blockquote>
      <p class="mt-4 mb-4">
        또한 C/C++ Addon을 개발하고자 하는 개발자는 인터페이스 가이드를 받지
        못하기 때문에 숙련된 개발자가 아니면 Addon을 적용하기가 어려웠다.
      </p>
      <p class="mt-4 mb-4">
        이러한 문제를 해결하기 위해 Node-API가 등장하게 되었다.
      </p>
      <h3
        id="1-abi-안정성"
        class="font-semibold leading-snug pb-0.5 pt-6 mb-2 group text-2xl mt-8"
      >
        <a aria-hidden="true" tabindex="-1" href="#1-abi-안정성"
          ><span
            class="icon icon-link opacity-0 group-hover:opacity-100 ease-in-out transition-opacity duration-300 before:absolute before:w-[40px] before:left-[-25px] before:content-[&quot;⧉&quot;] before:text-[#61768f] before:mr-2"
          ></span></a
        >1. ABI 안정성
      </h3>
      <p class="mt-4 mb-4">
        Node.js의 업데이트(내부 바인딩 디펜던시 라이브러리; V8 버전업 등)로 인해
        Addon이 깨지는 문제를 해결한다.
      </p>
      <h3
        id="2-인터페이스-제공"
        class="font-semibold leading-snug pb-0.5 pt-6 mb-2 group text-2xl mt-8"
      >
        <a aria-hidden="true" tabindex="-1" href="#2-인터페이스-제공"
          ><span
            class="icon icon-link opacity-0 group-hover:opacity-100 ease-in-out transition-opacity duration-300 before:absolute before:w-[40px] before:left-[-25px] before:content-[&quot;⧉&quot;] before:text-[#61768f] before:mr-2"
          ></span></a
        >2. 인터페이스 제공
      </h3>
      <p class="mt-4 mb-4">
        Node-API는 C/C++ 개발자가 아니더라도 사용할 수 있도록 설계되었다.
      </p>
      <p class="mt-4 mb-4">
        주요 인터페이스를 제공하고 이를 통해 Node.js와 상호작용 할 수 있도록
        한다.
      </p>
      <blockquote
        class="pl-4 text-[#8b949e] border-l-[0.25rem] border-[#425061]"
      >
        <p class="mt-4 mb-4">
          인터페이스는 아래의
          <a
            href="#rust%EC%99%80-node-api%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-nodejs-addon-%EA%B0%9C%EB%B0%9C"
            class="underline-highlight-fade"
            target="_blank"
            rel="noreferrer noopener"
            >Rust와 Node-API를 사용한 Node.js Addon 개발</a
          >에서 간단하게 소개한다.
        </p>
      </blockquote>
      <h3
        id="3-최적화"
        class="font-semibold leading-snug pb-0.5 pt-6 mb-2 group text-2xl mt-8"
      >
        <a aria-hidden="true" tabindex="-1" href="#3-최적화"
          ><span
            class="icon icon-link opacity-0 group-hover:opacity-100 ease-in-out transition-opacity duration-300 before:absolute before:w-[40px] before:left-[-25px] before:content-[&quot;⧉&quot;] before:text-[#61768f] before:mr-2"
          ></span></a
        >3. 최적화
      </h3>
      <p class="mt-4 mb-4">
        C/C++ Addon을 특별한 바인딩 과정 없이 적용할 경우 직접 메모리 관리를
        해야 했으며 멀티 스레딩도 스스로 구현해야 했다.
      </p>
      <p class="mt-4 mb-4">
        이는 Node.js와 V8, Libuv 등 다양한 바인딩 라이브러리들의 관계를 정확하게
        알아야 하는 부담으로 다가왔다.
      </p>
      <p class="mt-4 mb-4">
        Node-API는 인터페이스를 통해 최적화해 주기 때문에 Addon 개발자에게
        추가적인 부담을 주지 않는다.
      </p>
      <h2
        id="rust와-node-api를-사용한-nodejs-addon-개발"
        class="font-semibold leading-snug pb-0.5 pt-6 mb-2 group text-3xl mt-12 border-b border-[hsl(210deg_18%_87%_/100%)]"
      >
        <a
          aria-hidden="true"
          tabindex="-1"
          href="#rust와-node-api를-사용한-nodejs-addon-개발"
          ><span
            class="icon icon-link opacity-0 group-hover:opacity-100 ease-in-out transition-opacity duration-300 before:absolute before:w-[40px] before:left-[-25px] before:content-[&quot;⧉&quot;] before:text-[#61768f] before:mr-2"
          ></span></a
        >Rust와 Node-API를 사용한 Node.js Addon 개발
      </h2>
      <p class="mt-4 mb-4">
        이제 Addon 개발 과정을 따라가면서 실체를 조금 더 자세히 이해해 보자.
      </p>
      <p class="mt-4 mb-4">개발 과정은 다음과 같다.</p>
      <ol class="min-[790px]:ml-6 ml-4 list-decimal">
        <li>Node.js Addon 개발 환경 설정</li>
        <li>Rust 파일을 목적 파일로 컴파일</li>
        <li>목적 파일을 Node.js Addon에 연결</li>
        <li>JavaScript 파일에서 사용</li>
      </ol>
      <h3
        id="1-node-gyp-설치"
        class="font-semibold leading-snug pb-0.5 pt-6 mb-2 group text-2xl mt-8"
      >
        <a aria-hidden="true" tabindex="-1" href="#1-node-gyp-설치"
          ><span
            class="icon icon-link opacity-0 group-hover:opacity-100 ease-in-out transition-opacity duration-300 before:absolute before:w-[40px] before:left-[-25px] before:content-[&quot;⧉&quot;] before:text-[#61768f] before:mr-2"
          ></span></a
        >1. Node-gyp 설치
      </h3>
      <figure data-rehype-pretty-code-figure="">
        <pre
          tabindex="0"
          data-language="sh"
          data-theme="material-theme-palenight"
        ><code data-language="sh" data-theme="material-theme-palenight" style="display:grid"><span data-line=""><span style="color:#FFCB6B">$</span><span style="color:#C3E88D"> npm</span><span style="color:#C3E88D"> i</span><span style="color:#C3E88D"> -g</span><span style="color:#C3E88D"> node-gyp</span></span></code></pre>
      </figure>
      <p class="mt-4 mb-4">
        Node-API에서 제공하는 헤더, C 코드 등이 포함된
        <a
          href="https://github.com/nodejs/node-gyp"
          class="underline-highlight-fade"
          target="_blank"
          rel="noreferrer noopener"
          >node-gyp</a
        >를 설치한다.
      </p>
      <p class="mt-4 mb-4">
        사전 파일이 포함된 <code>node-gyp</code>로 Addon을 빌드할 예정이기
        때문에
        <a
          href="https://namu.wiki/w/GCC"
          class="underline-highlight-fade"
          target="_blank"
          rel="noreferrer noopener"
          >gcc</a
        >
        등의 컴파일러를 쓰지 않는다는 것을 확인할 수 있다.
      </p>
      <h3
        id="2-rust-파일을-목적-파일로-컴파일"
        class="font-semibold leading-snug pb-0.5 pt-6 mb-2 group text-2xl mt-8"
      >
        <a
          aria-hidden="true"
          tabindex="-1"
          href="#2-rust-파일을-목적-파일로-컴파일"
          ><span
            class="icon icon-link opacity-0 group-hover:opacity-100 ease-in-out transition-opacity duration-300 before:absolute before:w-[40px] before:left-[-25px] before:content-[&quot;⧉&quot;] before:text-[#61768f] before:mr-2"
          ></span></a
        >2. Rust 파일을 목적 파일로 컴파일
      </h3>
      <figure data-rehype-pretty-code-figure="">
        <pre
          tabindex="0"
          data-language="rs"
          data-theme="material-theme-palenight"
        ><code data-language="rs" data-theme="material-theme-palenight" style="display:grid"><span data-line=""><span style="color:#676E95;font-style:italic">// mycalc.rs</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// rust_mul이라는 곱셈 함수를 export 할 예정.</span></span>
<span data-line=""><span style="color:#89DDFF">#[</span><span style="color:#BABED8">no_mangle</span><span style="color:#89DDFF">]</span></span>
<span data-line=""><span style="color:#F78C6C">pub</span><span style="color:#C792EA"> extern</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">C</span><span style="color:#89DDFF">"</span><span style="color:#F78C6C"> fn</span><span style="color:#82AAFF"> rust_mul</span><span style="color:#89DDFF">(</span><span style="color:#BABED8">a</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> isize</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> b</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> isize</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> -&gt;</span><span style="color:#FFCB6B"> isize</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#BABED8">  a </span><span style="color:#89DDFF">*</span><span style="color:#BABED8"> b</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span></code></pre>
      </figure>
      <figure data-rehype-pretty-code-figure="">
        <pre
          tabindex="0"
          data-language="sh"
          data-theme="material-theme-palenight"
        ><code data-language="sh" data-theme="material-theme-palenight" style="display:grid"><span data-line=""><span style="color:#676E95;font-style:italic"># compile</span></span>
<span data-line=""><span style="color:#FFCB6B">$</span><span style="color:#C3E88D"> rustc</span><span style="color:#C3E88D"> --crate-type=</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">dylib</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D"> mycalc.rs</span><span style="color:#C3E88D"> -o</span><span style="color:#C3E88D"> libmycalc.so</span></span></code></pre>
      </figure>
      <p class="mt-4 mb-4">
        Rust 코드로 작성된 <code>rust_mul</code> 함수를
        <code>libmycalc.so</code> 파일로 컴파일한다.
      </p>
      <p class="mt-4 mb-4">
        해당 함수를 Node-API를 통해 C Addon으로 가져와 JavaScript 모듈에서
        사용할 수 있도록 할 예정이다.
      </p>
      <div class="img-container">
        <div
          class="flex justify-center min-h-[200px] mt-3 mb-3 w-full min-[790px]:w-[70%]"
        >
          <img
            class="w-full h-full cursor-zoom-in object-contain max-h-[550px]"
            alt="so file"
            src="/posts/n-api/so-file.webp"
          />
        </div>
      </div>
      <p class="mt-4 mb-4">
        <code>.so</code>(Shared Objects) 파일은 컴파일 단계에서 코드 영역에
        추가되지 않고 런타임에 동적으로 로드되는 라이브러리이다.
      </p>
      <h3
        id="3-bindinggyp-파일-생성"
        class="font-semibold leading-snug pb-0.5 pt-6 mb-2 group text-2xl mt-8"
      >
        <a aria-hidden="true" tabindex="-1" href="#3-bindinggyp-파일-생성"
          ><span
            class="icon icon-link opacity-0 group-hover:opacity-100 ease-in-out transition-opacity duration-300 before:absolute before:w-[40px] before:left-[-25px] before:content-[&quot;⧉&quot;] before:text-[#61768f] before:mr-2"
          ></span></a
        >3. binding.gyp 파일 생성
      </h3>
      <figure data-rehype-pretty-code-figure="">
        <pre
          tabindex="0"
          data-language="json"
          data-theme="material-theme-palenight"
        ><code data-language="json" data-theme="material-theme-palenight" style="display:grid"><span data-line=""><span style="color:#676E95;font-style:italic">// binding.gyp</span></span>
<span data-line=""><span style="color:#89DDFF">{</span></span>
<span data-line=""><span style="color:#89DDFF">  "</span><span style="color:#C792EA">targets</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> [</span></span>
<span data-line=""><span style="color:#89DDFF">    {</span></span>
<span data-line=""><span style="color:#89DDFF">      "</span><span style="color:#FFCB6B">target_name</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">mycalc_addon</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#89DDFF">      "</span><span style="color:#FFCB6B">sources</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> [</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">mycalc_addon.c</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">],</span></span>
<span data-line=""><span style="color:#89DDFF">      "</span><span style="color:#FFCB6B">libraries</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> [</span></span>
<span data-line=""><span style="color:#89DDFF">        "</span><span style="color:#C3E88D">/PATH/libmycalc.so</span><span style="color:#89DDFF">"</span><span style="color:#676E95;font-style:italic"> // 동적 로딩을 사용하기 위해 추가(Rust 파일을 컴파일한 파일)</span></span>
<span data-line=""><span style="color:#89DDFF">      ],</span></span>
<span data-line=""><span style="color:#89DDFF">    }</span></span>
<span data-line=""><span style="color:#89DDFF">  ]</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span></code></pre>
      </figure>
      <p class="mt-4 mb-4">
        <code>node-gyp</code>를 사용해 빌드할 때 필요한 설정 파일인
        <code>binding.gyp</code>를 작성한다.
      </p>
      <p class="mt-4 mb-4">
        <code>mycalc_addon.c</code> 파일은 Node-API를 사용해 C Addon을 작성할
        파일이다.
      </p>
      <h3
        id="4-addon-c-파일-작성"
        class="font-semibold leading-snug pb-0.5 pt-6 mb-2 group text-2xl mt-8"
      >
        <a aria-hidden="true" tabindex="-1" href="#4-addon-c-파일-작성"
          ><span
            class="icon icon-link opacity-0 group-hover:opacity-100 ease-in-out transition-opacity duration-300 before:absolute before:w-[40px] before:left-[-25px] before:content-[&quot;⧉&quot;] before:text-[#61768f] before:mr-2"
          ></span></a
        >4. Addon C 파일 작성
      </h3>
      <figure data-rehype-pretty-code-figure="">
        <pre
          tabindex="0"
          data-language="c"
          data-theme="material-theme-palenight"
        ><code data-language="c" data-theme="material-theme-palenight" style="display:grid"><span data-line=""><span style="color:#676E95;font-style:italic">// mycalc_addon.c</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// node_api를 가져오는 모습(node-gyp에 있을 것이므로 사용할 수 있다)</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">#include</span><span style="color:#89DDFF"> &lt;</span><span style="color:#C3E88D">node_api.h</span><span style="color:#89DDFF">&gt;</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">#include</span><span style="color:#89DDFF"> &lt;</span><span style="color:#C3E88D">stdio.h</span><span style="color:#89DDFF">&gt;</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// Rust 파일의 함수를 C로 가져온다(so 파일에 있을 예정)</span></span>
<span data-line=""><span style="color:#C792EA">int</span><span style="color:#82AAFF"> rust_mul</span><span style="color:#89DDFF">(</span><span style="color:#C792EA">int</span><span style="color:#BABED8;font-style:italic"> a</span><span style="color:#89DDFF">,</span><span style="color:#C792EA"> int</span><span style="color:#BABED8;font-style:italic"> b</span><span style="color:#89DDFF">);</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// 두 숫자를 더하는 C 함수</span></span>
<span data-line=""><span style="color:#BABED8">napi_value </span><span style="color:#82AAFF">Mul</span><span style="color:#89DDFF">(</span><span style="color:#BABED8">napi_env </span><span style="color:#BABED8;font-style:italic">env</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> napi_callback_info </span><span style="color:#BABED8;font-style:italic">info</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#F07178">  napi_status status</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  // 인자 개수와 인자 배열</span></span>
<span data-line=""><span style="color:#C792EA">  size_t</span><span style="color:#F07178"> argc </span><span style="color:#89DDFF">=</span><span style="color:#F78C6C"> 2</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#F07178">  napi_value </span><span style="color:#BABED8">argv</span><span style="color:#89DDFF">[</span><span style="color:#F78C6C">2</span><span style="color:#89DDFF">];</span></span>
<span data-line=""><span style="color:#F07178">  status </span><span style="color:#89DDFF">=</span><span style="color:#82AAFF"> napi_get_cb_info</span><span style="color:#89DDFF">(</span><span style="color:#F07178">env</span><span style="color:#89DDFF">,</span><span style="color:#F07178"> info</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> &amp;</span><span style="color:#F07178">argc</span><span style="color:#89DDFF">,</span><span style="color:#F07178"> argv</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> NULL,</span><span style="color:#89DDFF"> NULL);</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">  if</span><span style="color:#89DDFF"> (</span><span style="color:#F07178">status </span><span style="color:#89DDFF">!=</span><span style="color:#F07178"> napi_ok</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#82AAFF">    napi_throw_error</span><span style="color:#89DDFF">(</span><span style="color:#F07178">env</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> NULL,</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">Failed to parse arguments</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">);</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">    return</span><span style="color:#89DDFF"> NULL;</span></span>
<span data-line=""><span style="color:#89DDFF">  }</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  // 인자가 2개인지 확인</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">  if</span><span style="color:#89DDFF"> (</span><span style="color:#F07178">argc </span><span style="color:#89DDFF">&lt;</span><span style="color:#F78C6C"> 2</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#82AAFF">    napi_throw_error</span><span style="color:#89DDFF">(</span><span style="color:#F07178">env</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> NULL,</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">Wrong number of arguments</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">);</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">    return</span><span style="color:#89DDFF"> NULL;</span></span>
<span data-line=""><span style="color:#89DDFF">  }</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  // 인자를 double로 변환. JavaScript와 C++의 다른 타입을 일치시킨다</span></span>
<span data-line=""><span style="color:#C792EA">  double</span><span style="color:#F07178"> value1</span><span style="color:#89DDFF">,</span><span style="color:#F07178"> value2</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#F07178">  status </span><span style="color:#89DDFF">=</span><span style="color:#82AAFF"> napi_get_value_double</span><span style="color:#89DDFF">(</span><span style="color:#F07178">env</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> argv</span><span style="color:#89DDFF">[</span><span style="color:#F78C6C">0</span><span style="color:#89DDFF">],</span><span style="color:#89DDFF"> &amp;</span><span style="color:#F07178">value1</span><span style="color:#89DDFF">);</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">  if</span><span style="color:#89DDFF"> (</span><span style="color:#F07178">status </span><span style="color:#89DDFF">!=</span><span style="color:#F07178"> napi_ok</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#82AAFF">    napi_throw_error</span><span style="color:#89DDFF">(</span><span style="color:#F07178">env</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> NULL,</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">Invalid argument 1</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">);</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">    return</span><span style="color:#89DDFF"> NULL;</span></span>
<span data-line=""><span style="color:#89DDFF">  }</span></span>
<span data-line=""><span style="color:#F07178">  status </span><span style="color:#89DDFF">=</span><span style="color:#82AAFF"> napi_get_value_double</span><span style="color:#89DDFF">(</span><span style="color:#F07178">env</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> argv</span><span style="color:#89DDFF">[</span><span style="color:#F78C6C">1</span><span style="color:#89DDFF">],</span><span style="color:#89DDFF"> &amp;</span><span style="color:#F07178">value2</span><span style="color:#89DDFF">);</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">  if</span><span style="color:#89DDFF"> (</span><span style="color:#F07178">status </span><span style="color:#89DDFF">!=</span><span style="color:#F07178"> napi_ok</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#82AAFF">    napi_throw_error</span><span style="color:#89DDFF">(</span><span style="color:#F07178">env</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> NULL,</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">Invalid argument 2</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">);</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">    return</span><span style="color:#89DDFF"> NULL;</span></span>
<span data-line=""><span style="color:#89DDFF">  }</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  // rust 모듈을 활용해 결과 계산 //////////////////////////////////////////////</span></span>
<span data-line=""><span style="color:#C792EA">  double</span><span style="color:#F07178"> result </span><span style="color:#89DDFF">=</span><span style="color:#82AAFF"> rust_mul</span><span style="color:#89DDFF">(</span><span style="color:#F07178">value1</span><span style="color:#89DDFF">,</span><span style="color:#F07178"> value2</span><span style="color:#89DDFF">);</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  // rust 모듈의 결과를 napi_value로 변환</span></span>
<span data-line=""><span style="color:#F07178">  napi_value result_value</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#F07178">  status </span><span style="color:#89DDFF">=</span><span style="color:#82AAFF"> napi_create_double</span><span style="color:#89DDFF">(</span><span style="color:#F07178">env</span><span style="color:#89DDFF">,</span><span style="color:#F07178"> result</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> &amp;</span><span style="color:#F07178">result_value</span><span style="color:#89DDFF">);</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">  if</span><span style="color:#89DDFF"> (</span><span style="color:#F07178">status </span><span style="color:#89DDFF">!=</span><span style="color:#F07178"> napi_ok</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#82AAFF">    napi_throw_error</span><span style="color:#89DDFF">(</span><span style="color:#F07178">env</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> NULL,</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">Failed to create result value</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">);</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">    return</span><span style="color:#89DDFF"> NULL;</span></span>
<span data-line=""><span style="color:#89DDFF">  }</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  // 결과 반환</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">  return</span><span style="color:#F07178"> result_value</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// 모듈 초기화 함수</span></span>
<span data-line=""><span style="color:#BABED8">napi_value </span><span style="color:#82AAFF">Init</span><span style="color:#89DDFF">(</span><span style="color:#BABED8">napi_env </span><span style="color:#BABED8;font-style:italic">env</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> napi_value </span><span style="color:#BABED8;font-style:italic">exports</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#F07178">  napi_status status</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  // 함수 등록</span></span>
<span data-line=""><span style="color:#F07178">  napi_value fn</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#F07178">  status </span><span style="color:#89DDFF">=</span><span style="color:#82AAFF"> napi_create_function</span><span style="color:#89DDFF">(</span><span style="color:#F07178">env</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> NULL,</span><span style="color:#F78C6C"> 0</span><span style="color:#89DDFF">,</span><span style="color:#F07178"> Mul</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> NULL,</span><span style="color:#89DDFF"> &amp;</span><span style="color:#F07178">fn</span><span style="color:#89DDFF">);</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">  if</span><span style="color:#89DDFF"> (</span><span style="color:#F07178">status </span><span style="color:#89DDFF">!=</span><span style="color:#F07178"> napi_ok</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#82AAFF">    napi_throw_error</span><span style="color:#89DDFF">(</span><span style="color:#F07178">env</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> NULL,</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">Failed to create function</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">);</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">    return</span><span style="color:#89DDFF"> NULL;</span></span>
<span data-line=""><span style="color:#89DDFF">  }</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  // exports 객체에 함수 추가. 이로써 JavaScript에서 사용 가능해진다! ////////</span></span>
<span data-line=""><span style="color:#F07178">  status </span><span style="color:#89DDFF">=</span><span style="color:#82AAFF"> napi_set_named_property</span><span style="color:#89DDFF">(</span><span style="color:#F07178">env</span><span style="color:#89DDFF">,</span><span style="color:#F07178"> exports</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">mul</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#F07178"> fn</span><span style="color:#89DDFF">);</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">  if</span><span style="color:#89DDFF"> (</span><span style="color:#F07178">status </span><span style="color:#89DDFF">!=</span><span style="color:#F07178"> napi_ok</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#82AAFF">    napi_throw_error</span><span style="color:#89DDFF">(</span><span style="color:#F07178">env</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> NULL,</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">Failed to set named property</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">);</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">    return</span><span style="color:#89DDFF"> NULL;</span></span>
<span data-line=""><span style="color:#89DDFF">  }</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">  return</span><span style="color:#F07178"> exports</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// 모듈 등록</span></span>
<span data-line=""><span style="color:#82AAFF">NAPI_MODULE</span><span style="color:#89DDFF">(</span><span style="color:#BABED8">NODE_GYP_MODULE_NAME</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> Init</span><span style="color:#89DDFF">)</span></span></code></pre>
      </figure>
      <p class="mt-4 mb-4">
        <code>napi</code>로 시작하는 함수들은 Node-API에서 제공하는 함수이다.
      </p>
      <p class="mt-4 mb-4">
        위의 코드를 모두 이해할 필요는 없다. Node-API를 사용해 C Addon을
        작성하는 방법을 보여주기 위한 코드이다.
      </p>
      <p class="mt-4 mb-4">
        중요한 점은 Rust의 <code>rust_mul</code> 함수를 C로 가져와
        <code>Mul</code> 함수에서 사용하고 있다는 점이다.
      </p>
      <h3
        id="5-addon-빌드"
        class="font-semibold leading-snug pb-0.5 pt-6 mb-2 group text-2xl mt-8"
      >
        <a aria-hidden="true" tabindex="-1" href="#5-addon-빌드"
          ><span
            class="icon icon-link opacity-0 group-hover:opacity-100 ease-in-out transition-opacity duration-300 before:absolute before:w-[40px] before:left-[-25px] before:content-[&quot;⧉&quot;] before:text-[#61768f] before:mr-2"
          ></span></a
        >5. Addon 빌드
      </h3>
      <figure data-rehype-pretty-code-figure="">
        <pre
          tabindex="0"
          data-language="sh"
          data-theme="material-theme-palenight"
        ><code data-language="sh" data-theme="material-theme-palenight" style="display:grid"><span data-line=""><span style="color:#FFCB6B">$</span><span style="color:#C3E88D"> node-gyp</span><span style="color:#C3E88D"> configure</span><span style="color:#89DDFF"> &amp;&amp;</span><span style="color:#FFCB6B"> node-gyp</span><span style="color:#C3E88D"> build</span></span></code></pre>
      </figure>
      <p class="mt-4 mb-4"><code>node-gyp</code>를 사용해 Addon을 빌드한다.</p>
      <div class="img-container">
        <div
          class="flex justify-center min-h-[200px] mt-3 mb-3 w-full min-[790px]:w-[40%]"
        >
          <img
            class="w-full h-full cursor-zoom-in object-contain max-h-[550px]"
            alt="build addon"
            src="/posts/n-api/build-addon.webp"
          />
        </div>
      </div>
      <p class="mt-4 mb-4">
        <code>build</code> 명령어를 실행하면
        <code>build/Release</code> 디렉터리에
        <code>mycalc_addon.node</code> 파일이 생성된다.
      </p>
      <blockquote
        class="pl-4 text-[#8b949e] border-l-[0.25rem] border-[#425061]"
      >
        <p class="mt-4 mb-4">
          <code>.node</code> 파일은 Node.js Addon을 의미한다.
        </p>
      </blockquote>
      <h3
        id="6-javascript-파일에서-사용하기"
        class="font-semibold leading-snug pb-0.5 pt-6 mb-2 group text-2xl mt-8"
      >
        <a
          aria-hidden="true"
          tabindex="-1"
          href="#6-javascript-파일에서-사용하기"
          ><span
            class="icon icon-link opacity-0 group-hover:opacity-100 ease-in-out transition-opacity duration-300 before:absolute before:w-[40px] before:left-[-25px] before:content-[&quot;⧉&quot;] before:text-[#61768f] before:mr-2"
          ></span></a
        >6. JavaScript 파일에서 사용하기
      </h3>
      <figure data-rehype-pretty-code-figure="">
        <pre
          tabindex="0"
          data-language="js"
          data-theme="material-theme-palenight"
        ><code data-language="js" data-theme="material-theme-palenight" style="display:grid"><span data-line=""><span style="color:#676E95;font-style:italic">// index.js</span></span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> addon </span><span style="color:#89DDFF">=</span><span style="color:#82AAFF"> require</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">./build/Release/mycalc_addon</span><span style="color:#89DDFF">"</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#BABED8">console</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">log</span><span style="color:#BABED8">(addon</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">mul</span><span style="color:#BABED8">(</span><span style="color:#F78C6C">3</span><span style="color:#89DDFF">,</span><span style="color:#F78C6C"> 5</span><span style="color:#BABED8">))</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // 15 출력</span></span></code></pre>
      </figure>
      <p class="mt-4 mb-4">
        TA-DA! JavaScript 파일에서 C Addon을 사용하고 있다.
      </p>
      <p class="mt-4 mb-4">
        이로써 Rust(<code>rust_mul</code>) &lt;-&gt; C(<code>Mul</code>)
        &lt;-&gt; Node.js(<code>mul</code>) 간의 연결이 완료되었다.
      </p>
      <h2
        id="마치며"
        class="font-semibold leading-snug pb-0.5 pt-6 mb-2 group text-3xl mt-12 border-b border-[hsl(210deg_18%_87%_/100%)]"
      >
        <a aria-hidden="true" tabindex="-1" href="#마치며"
          ><span
            class="icon icon-link opacity-0 group-hover:opacity-100 ease-in-out transition-opacity duration-300 before:absolute before:w-[40px] before:left-[-25px] before:content-[&quot;⧉&quot;] before:text-[#61768f] before:mr-2"
          ></span></a
        >마치며
      </h2>
      <p class="mt-4 mb-4">
        Rust와 Node-API를 사용해 Node.js Addon을 개발하면서 Addon 및 적용 과정을
        이해할 수 있었다.
      </p>
      <p class="mt-4 mb-4">글을 요약하면 다음과 같다.</p>
      <ol class="min-[790px]:ml-6 ml-4 list-decimal">
        <li>N-API는 Node-API 를 의미한다.</li>
        <li>
          Node-API를 활용해 JS 레이어를 거치지 않는, 고속 라이브러리를 만들 수
          있다.
        </li>
        <li>
          바이너리 코드로 통합되므로 FFI(<a
            href="https://ko.wikipedia.org/wiki/%EC%99%B8%EB%B6%80_%ED%95%A8%EC%88%98_%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4"
            class="underline-highlight-fade"
            target="_blank"
            rel="noreferrer noopener"
            >외부 함수 인터페이스</a
          >; 다른 언어 호출)가 가능하다.
        </li>
      </ol>
      <p class="mt-4 mb-4">
        Node.js의 내부에 한층 더 깊게 파고들어 간 것 같아 뿌듯하다.
      </p>
      <p class="mt-4 mb-4">
        이 글을 통해 Node.js Addon 개발에 흥미가 생겼길 바라며 마무리 하겠다.
      </p>
      <h2
        id="참고"
        class="font-semibold leading-snug pb-0.5 pt-6 mb-2 group text-3xl mt-12 border-b border-[hsl(210deg_18%_87%_/100%)]"
      >
        <a aria-hidden="true" tabindex="-1" href="#참고"
          ><span
            class="icon icon-link opacity-0 group-hover:opacity-100 ease-in-out transition-opacity duration-300 before:absolute before:w-[40px] before:left-[-25px] before:content-[&quot;⧉&quot;] before:text-[#61768f] before:mr-2"
          ></span></a
        >참고
      </h2>
      <ul class="min-[790px]:ml-6 ml-4 list-disc">
        <li>
          <a
            href="https://nodejs.org/docs/latest/api/addons.html"
            class="underline-highlight-fade"
            target="_blank"
            rel="noreferrer noopener"
            >https://nodejs.org/docs/latest/api/addons.html</a
          >
        </li>
        <li>
          <a
            href="https://medium.com/ai-innovation/a-guide-for-javascript-developers-to-build-c-add-ons-with-node-addon-api-28c84a0c0cb1"
            class="underline-highlight-fade"
            target="_blank"
            rel="noreferrer noopener"
            >https://medium.com/ai-innovation/a-guide-for-javascript-developers-to-build-c-add-ons-with-node-addon-api-28c84a0c0cb1</a
          >
        </li>
        <li>
          <a
            href="https://nodeaddons.com/how-not-to-access-node-js-from-c-worker-threads"
            class="underline-highlight-fade"
            target="_blank"
            rel="noreferrer noopener"
            >https://nodeaddons.com/how-not-to-access-node-js-from-c-worker-threads</a
          >
        </li>
      </ul>
    </div>
    <aside
      class="absolute top-0 inline-block h-full break-words left-full max-xl:hidden"
      aria-label="index"
    >
      <ul
        class="ml-9 sticky pl-4 top-32 w-[calc(50vw-35vw)] border-l-2 border-l-base min-[1320px]:ml-20 min-[1320px]:top-48"
      >
        <li
          id="node-api란"
          class="pt-0.5 text-base select-none cursor-pointer mb-0.5 hover:text-sub-blue"
        >
          Node-API란?
        </li>
        <li
          id="node-api의-장점"
          class="pt-0.5 text-base select-none cursor-pointer mb-0.5 hover:text-sub-blue"
        >
          Node-API의 장점
        </li>
        <li
          id="1-abi-안정성"
          class="pt-0.5 text-base select-none cursor-pointer before:content-['-'] before:mr-1 ml-2.5 hover:text-sub-blue"
        >
          1. ABI 안정성
        </li>
        <li
          id="2-인터페이스-제공"
          class="pt-0.5 text-base select-none cursor-pointer before:content-['-'] before:mr-1 ml-2.5 hover:text-sub-blue"
        >
          2. 인터페이스 제공
        </li>
        <li
          id="3-최적화"
          class="pt-0.5 text-base select-none cursor-pointer before:content-['-'] before:mr-1 ml-2.5 mb-1.5 hover:text-sub-blue"
        >
          3. 최적화
        </li>
        <li
          id="rust와-node-api를-사용한-nodejs-addon-개발"
          class="pt-0.5 text-base select-none cursor-pointer mb-0.5 hover:text-sub-blue"
        >
          Rust와 Node-API를 사용한 Node.js Addon 개발
        </li>
        <li
          id="1-node-gyp-설치"
          class="pt-0.5 text-base select-none cursor-pointer before:content-['-'] before:mr-1 ml-2.5 hover:text-sub-blue"
        >
          1. Node-gyp 설치
        </li>
        <li
          id="2-rust-파일을-목적-파일로-컴파일"
          class="pt-0.5 text-base select-none cursor-pointer before:content-['-'] before:mr-1 ml-2.5 hover:text-sub-blue"
        >
          2. Rust 파일을 목적 파일로 컴파일
        </li>
        <li
          id="3-bindinggyp-파일-생성"
          class="pt-0.5 text-base select-none cursor-pointer before:content-['-'] before:mr-1 ml-2.5 hover:text-sub-blue"
        >
          3. binding.gyp 파일 생성
        </li>
        <li
          id="4-addon-c-파일-작성"
          class="pt-0.5 text-base select-none cursor-pointer before:content-['-'] before:mr-1 ml-2.5 hover:text-sub-blue"
        >
          4. Addon C 파일 작성
        </li>
        <li
          id="5-addon-빌드"
          class="pt-0.5 text-base select-none cursor-pointer before:content-['-'] before:mr-1 ml-2.5 hover:text-sub-blue"
        >
          5. Addon 빌드
        </li>
        <li
          id="6-javascript-파일에서-사용하기"
          class="pt-0.5 text-base select-none cursor-pointer before:content-['-'] before:mr-1 ml-2.5 mb-1.5 hover:text-sub-blue"
        >
          6. JavaScript 파일에서 사용하기
        </li>
        <li
          id="마치며"
          class="pt-0.5 text-base select-none cursor-pointer mb-0.5 hover:text-sub-blue"
        >
          마치며
        </li>
        <li
          id="참고"
          class="pt-0.5 text-base select-none cursor-pointer mb-0.5 hover:text-sub-blue"
        >
          참고
        </li>
      </ul>
    </aside>
  </section>
  <a
    class="inline-block text-[#30ffcb] leading-[1.1] after:transition-[width] after:duration-500 ease-in-out hover:after:w-[100%] after:w-0 after:block after:h-[1px] print:text-black print:underline after:bg-[#30ffcb] after:content-[&quot;&quot;] mt-24 [&amp;&amp;]:text-transparent bg-rainbow-water bg-clip-text bg-[length:400%_400%] animate-rainbow-water"
    href="https://github.com/1ilsang/dev/issues/new?labels=🧊 comment&amp;assignees=1ilsang&amp;title=[🧊] N-API(Node-API)%20%EC%96%95%EA%B2%8C%20%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0(feat.%20Rust)&amp;body=&lt;!-- 환영합니다. 이슈 남겨주시면 빠르게 답변드리겠습니다. 🙇 --&gt;"
    rel="noopener noreferrer"
    target="_blank"
    >📮 이 포스트에 관심 있으신가요? 이슈를 남겨주세요! 👍</a
  >
  <div class="flex items-center mt-4 mb-56">
    <iframe
      class="border-0 rounded-md cursor-pointer object-contain hover:animate-bouncing"
      src="https://github.com/sponsors/1ilsang/button"
      title="Sponsor 1ilsang"
      height="32"
      width="114"
    ></iframe>
  </div>
</section>
