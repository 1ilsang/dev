<progress class="[&amp;::-webkit-progress-bar]:bg-sub-blue fixed top-0 left-0 z-10 w-full h-[3px] appearance-none [&amp;::-webkit-progress-value]:bg-base-og" value="0" max="1"></progress><nav class="fixed z-40 flex flex-wrap w-full justify-between justify-items-center hover:animate-rainbow-water hover:bg-nav hover:bg-[length:400%_400%] opacity-10	md:opacity-100 shadow-nav shadow-lg"><h2 class="tracking-tight mr-6 text-2xl	font-bold	my-2 ml-3.5"><a class="hover:underline" href="/">1ilsang</a></h2><div class="flex"><h2 class="tracking-tight mr-6 text-xl mt-2.5"><a class="hover:underline" href="/posts">posts</a></h2><h2 class="tracking-tight mr-6 text-xl mt-2.5"><a class="hover:underline" href="/tags">tags</a></h2><div class="mr-2 w-8 h-8 mt-2" role="img" aria-label="1ilsang character"><a href="/about"><img class="border border-solid rounded-full border-white-blue" src="/images/chul.webp" alt="1ilsang"></a></div></div></nav><section class="h-auto min-h-full max-w-screen-md py-20 md:py-28 mx-4 min-[790px]:m-auto print:py-0"><h1 class="text-4xl md:text-6xl break-words">알랑말랑 암묵적 형변환 말랑말랑 이해하기</h1><section class="flex items-center mt-4"><div class="mr-2 w-9	h-9 md:w-12 md:h-12" role="img" aria-label="1ilsang character"><a href="/about"><img class="border border-solid rounded-full border-sub-blue" src="/images/chul.webp" alt="1ilsang"></a></div><div><a class="text-lg" href="/about">1ilsang</a><div class="text-sub-blue text-sm">클라이밍 하실래염?</div></div></section><section class="flex flex-wrap mt-2 items-end"><a class="text-highlight print:text-black hover:underline mr-2" target="_self" href="/tags/javascript">#<!-- -->javascript</a><a class="text-highlight print:text-black hover:underline mr-2" target="_self" href="/tags/type">#<!-- -->type</a><a class="text-highlight print:text-black hover:underline mr-2" target="_self" href="/tags/implicit-coercion">#<!-- -->implicit-coercion</a></section><section><div class="text-date-gray inline">Published <time datetime="2023-04-22 17:02">2023-04-22 17:02</time></div></section><section id="post-body-container" class="relative"><div class="markdown"><figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="js" data-theme="material-theme-palenight"><code data-language="js" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#89DDFF">{}</span><span style="color:#89DDFF"> ==</span><span style="color:#BABED8"> []  </span><span style="color:#676E95;font-style:italic">// ERROR</span></span>
<span data-line=""><span style="color:#BABED8">[] </span><span style="color:#89DDFF">==</span><span style="color:#89DDFF"> {}</span><span style="color:#676E95;font-style:italic">  // false</span></span>
<span data-line=""><span style="color:#BABED8">[] </span><span style="color:#89DDFF">==</span><span style="color:#89DDFF"> ''</span><span style="color:#676E95;font-style:italic">  // true</span></span>
<span data-line=""><span style="color:#BABED8">[] </span><span style="color:#89DDFF">==</span><span style="color:#BABED8"> []  </span><span style="color:#676E95;font-style:italic">// false</span></span>
<span data-line=""><span style="color:#89DDFF">"</span><span style="color:#C3E88D">[object Object]</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF"> ==</span><span style="color:#89DDFF"> {}</span><span style="color:#676E95;font-style:italic">  // true</span></span>
<span data-line=""><span style="color:#BABED8">[</span><span style="color:#F78C6C">45</span><span style="color:#BABED8">] </span><span style="color:#89DDFF">==</span><span style="color:#F78C6C"> 45</span><span style="color:#676E95;font-style:italic">  // true</span></span>
<span data-line=""><span style="color:#BABED8">[</span><span style="color:#F78C6C">45</span><span style="color:#BABED8">] </span><span style="color:#89DDFF">==</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">45</span><span style="color:#89DDFF">'</span><span style="color:#676E95;font-style:italic">  // true</span></span>
<span data-line=""><span style="color:#F78C6C">4</span><span style="color:#89DDFF"> *</span><span style="color:#BABED8"> []  </span><span style="color:#676E95;font-style:italic">// 0</span></span>
<span data-line=""><span style="color:#BABED8">[] </span><span style="color:#89DDFF">+</span><span style="color:#89DDFF"> {}</span><span style="color:#676E95;font-style:italic">  // "[object Object]"</span></span>
<span data-line=""><span style="color:#89DDFF">{}</span><span style="color:#89DDFF"> +</span><span style="color:#BABED8"> []  </span><span style="color:#676E95;font-style:italic">// 0</span></span>
<span data-line=""><span style="color:#F78C6C">0</span><span style="color:#89DDFF"> ==</span><span style="color:#89DDFF"> '</span><span style="color:#BABED8">\n</span><span style="color:#89DDFF">'</span><span style="color:#676E95;font-style:italic">  // true</span></span>
<span data-line=""><span style="color:#F78C6C">1</span><span style="color:#89DDFF"> +</span><span style="color:#F78C6C"> 2</span><span style="color:#89DDFF"> +</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">3</span><span style="color:#89DDFF">'</span><span style="color:#676E95;font-style:italic">  // 33</span></span>
<span data-line=""><span style="color:#89DDFF">NaN</span><span style="color:#89DDFF"> ==</span><span style="color:#89DDFF"> NaN</span><span style="color:#676E95;font-style:italic">  // false</span></span>
<span data-line=""><span style="color:#89DDFF">undefined</span><span style="color:#89DDFF"> ==</span><span style="color:#89DDFF"> null</span><span style="color:#676E95;font-style:italic"> // true</span></span>
<span data-line=""> </span></code></pre></figure>
<p></p><div class="img-container"><div class="img-wrap cover"><img src="https://github.com/1ilsang/dev/assets/23524849/eb6ea24b-99e3-4ee0-b97e-ff2c6c78786e" alt="cover"></div></div><p></p>
<h3 id="tldr" data-heading="true"><a data-heading="true" href="#tldr"><span class="icon icon-link"></span></a>TL;DR!</h3>
<ol>
<li>위 예시의 결과값이 도출되는 과정을 이해한다.</li>
<li>암묵적 형변환을 유도하지 말라</li>
<li>암묵적 형변환을 유도하지 마시오</li>
</ol>
<blockquote>
<p><strong>타입스크립트를 사용하면 되지 않나요?</strong></p>
</blockquote>
<h3 id="들어가기-전에" data-heading="true"><a data-heading="true" href="#들어가기-전에"><span class="icon icon-link"></span></a>들어가기 전에</h3>
<p></p><div class="img-container"><div class="img-wrap l"><img src="https://github.com/1ilsang/dev/assets/23524849/a00bf58f-aeb8-4a67-b3fd-bf4236d53011" alt="primitive-type"></div></div><p></p>
<blockquote>
<p><a class="underline-highlight-fade" target="_blank" href="https://velog.io/@imjkim49/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%83%80%EC%9E%85-%EC%A0%95%EB%A6%AC" rel="noreferrer noopener">이미지 주소</a></p>
</blockquote>
<p>자바스크립트는 6가지 원시 타입과 <code>Object</code> 라는 객체 타입, <strong>총 7가지 타입</strong> 이 존재한다.</p>
<blockquote>
<p>ES2020에서 원시 타입에 bigint 타입이 추가되었기 때문에 이제는 총 8가지 타입이 존재하게 되었다.</p>
</blockquote>
<p>기본적으로 암묵적 형변환은 모두 "원시 타입(<strong>문자열, 숫자, 불리언</strong>)"을 기준으로 하게 된다. 원시타입이 객체타입으로 암묵적 형변환이 되는 케이스는 존재하지 않는다.</p>
<h3 id="암묵적-형변환은-언제-일어나나요" data-heading="true"><a data-heading="true" href="#암묵적-형변환은-언제-일어나나요"><span class="icon icon-link"></span></a>암묵적 형변환은 언제 일어나나요?</h3>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="js" data-theme="material-theme-palenight"><code data-language="js" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#676E95;font-style:italic">// 표현식이 모두 문자열 타입이여야 하는 컨텍스트</span></span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> a </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">10</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF"> +</span><span style="color:#F78C6C"> 2</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // "102"</span></span>
<span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> b </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> `</span><span style="color:#C3E88D">1 * 10 = </span><span style="color:#89DDFF">${</span><span style="color:#F78C6C">1</span><span style="color:#89DDFF"> *</span><span style="color:#F78C6C"> 10</span><span style="color:#89DDFF">}`</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // "1 * 10 = 10"</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#676E95;font-style:italic">// 표현식이 모두 숫자 타입이여야 하는 컨텍스트</span></span>
<span data-line=""><span style="color:#F78C6C">5</span><span style="color:#89DDFF"> *</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">10</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // 50</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#676E95;font-style:italic">// 표현식이 불리언 타입이여야 하는 컨텍스트</span></span>
<span data-line=""><span style="color:#89DDFF">!</span><span style="color:#F78C6C">0</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // true</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">if</span><span style="color:#BABED8"> (</span><span style="color:#F78C6C">1</span><span style="color:#BABED8">) </span><span style="color:#89DDFF">{</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span>
<span data-line=""><span style="color:#F78C6C">1</span><span style="color:#89DDFF"> ==</span><span style="color:#BABED8"> []</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // false</span></span></code></pre></figure>
<p><strong>자바스크립트 엔진은 표현식을 평가할 때 문맥, 즉 컨텍스트(Context)에 고려하여 암묵적 타입 변환을 실행한다.</strong></p>
<blockquote>
<p><a class="underline-highlight-fade" target="_blank" href="https://poiemaweb.com/js-type-coercion#2-암묵적-타입-변환" rel="noreferrer noopener">https://poiemaweb.com/js-type-coercion#2-암묵적-타입-변환</a></p>
</blockquote>
<ul>
<li>산술 연산자(+-*/)의 경우 <code>+</code> 는 문자열이 우선순위가 더 높으며 나머지 연산은 숫자가 더 우선순위가 높다.</li>
<li>동치 연산자(==)의 경우 피연산자간의 관계에 따라 정의가 다르다.</li>
</ul>
<h3 id="동치연산자-한짤로-보기" data-heading="true"><a data-heading="true" href="#동치연산자-한짤로-보기"><span class="icon icon-link"></span></a>동치연산자 한짤로 보기</h3>
<p></p><div class="img-container"><div class="img-wrap l"><img src="https://github.com/1ilsang/dev/assets/23524849/a3895658-4ac2-4e4c-99b7-c88bb15c9474" alt="example"></div></div><p></p>
<blockquote>
<p>출처: <a class="underline-highlight-fade" target="_blank" href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Equality_comparisons_and_sameness" rel="noreferrer noopener">MDN</a></p>
</blockquote>
<p>동치 연산의 관계를 보면 <code>Object</code> 타입의 경우 <code>ToPrimitive</code> 라는 값이 있다.</p>
<p>이 함수가 암묵적 형변환의 핵심이며, 이 함수를 이해하면 타입 변환의 과정을 이해할 수 있다.</p>
<h2 id="toprimitive-는-동치연산-뿐만-아니라-원시값과-비교가-필요한-모든-순간에-동작한다" data-heading="true"><a data-heading="true" href="#toprimitive-는-동치연산-뿐만-아니라-원시값과-비교가-필요한-모든-순간에-동작한다"><span class="icon icon-link"></span></a><code>ToPrimitive</code> 는 동치연산 뿐만 아니라 원시값과 비교가 필요한 모든 순간에 동작한다</h2>
<p></p><div class="img-container"><div class="img-wrap"><img src="https://github.com/1ilsang/dev/assets/23524849/0475aed2-ae11-4056-a3d4-5b567a2518ba" alt="to-primitive"></div></div><p></p>
<p><code>Symbol.toPrimitive</code>: A method that converts an object to a corresponding primitive value. Called by the&nbsp;ToPrimitive&nbsp;abstract operation.</p>
<blockquote>
<p><a class="underline-highlight-fade" target="_blank" href="https://262.ecma-international.org/11.0/" rel="noreferrer noopener">ECMA2020</a></p>
</blockquote>
<p>설명과 같이 객체의 원시 타입의 값을 반환하는 <code>Symbol.toPrimitive</code> 메서드는 <code>ToPrimitive</code> <strong>추상 명령</strong> 에서 사용된다.</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="js" data-theme="material-theme-palenight"><code data-language="js" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#C792EA">function</span><span style="color:#82AAFF"> toPrimitive</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">input</span><span style="color:#89DDFF">,</span><span style="color:#BABED8;font-style:italic"> PreferredType</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">  // PreferredType은 호출자가 기대하는 타입</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">  if</span><span style="color:#F07178"> (</span><span style="color:#89DDFF">typeof</span><span style="color:#BABED8"> input</span><span style="color:#89DDFF"> ===</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">object</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF"> ||</span><span style="color:#89DDFF"> typeof</span><span style="color:#BABED8"> input</span><span style="color:#89DDFF"> ===</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">function</span><span style="color:#89DDFF">'</span><span style="color:#F07178">) </span><span style="color:#89DDFF">{</span></span>
<span data-line=""><span style="color:#C792EA">    let</span><span style="color:#BABED8"> hint</span><span style="color:#89DDFF"> =</span></span>
<span data-line=""><span style="color:#BABED8">      PreferredType</span><span style="color:#89DDFF"> ===</span><span style="color:#89DDFF"> undefined</span></span>
<span data-line=""><span style="color:#89DDFF">        ?</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">default</span><span style="color:#89DDFF">'</span></span>
<span data-line=""><span style="color:#89DDFF">        :</span><span style="color:#89DDFF"> typeof</span><span style="color:#BABED8"> PreferredType</span><span style="color:#89DDFF"> ===</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">string</span><span style="color:#89DDFF">'</span></span>
<span data-line=""><span style="color:#89DDFF">          ?</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">string</span><span style="color:#89DDFF">'</span></span>
<span data-line=""><span style="color:#89DDFF">          :</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">number</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#C792EA">    let</span><span style="color:#BABED8"> exoticToPrim</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> input</span><span style="color:#F07178">[</span><span style="color:#BABED8">Symbol</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">toPrimitive</span><span style="color:#F07178">]</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">    if</span><span style="color:#F07178"> (</span><span style="color:#BABED8">exoticToPrim</span><span style="color:#89DDFF"> !==</span><span style="color:#89DDFF"> undefined</span><span style="color:#F07178">) </span><span style="color:#89DDFF">{</span></span>
<span data-line=""><span style="color:#C792EA">      let</span><span style="color:#BABED8"> result</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> exoticToPrim</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">apply</span><span style="color:#F07178">(</span><span style="color:#BABED8">input</span><span style="color:#89DDFF">,</span><span style="color:#F07178"> [</span><span style="color:#BABED8">hint</span><span style="color:#F07178">])</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">      if</span><span style="color:#F07178"> (</span><span style="color:#89DDFF">!</span><span style="color:#F07178">(</span><span style="color:#89DDFF">typeof</span><span style="color:#BABED8"> input</span><span style="color:#89DDFF"> ===</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">object</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF"> ||</span><span style="color:#89DDFF"> typeof</span><span style="color:#BABED8"> input</span><span style="color:#89DDFF"> ===</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">function</span><span style="color:#89DDFF">'</span><span style="color:#F07178">))</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">        return</span><span style="color:#BABED8"> result</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">      throw</span><span style="color:#89DDFF"> new</span><span style="color:#82AAFF"> TypeError</span><span style="color:#F07178">()</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">    }</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">    if</span><span style="color:#F07178"> (</span><span style="color:#BABED8">hint</span><span style="color:#89DDFF"> ===</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">default</span><span style="color:#89DDFF">'</span><span style="color:#F07178">) </span><span style="color:#BABED8">hint</span><span style="color:#89DDFF"> =</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">number</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">    return</span><span style="color:#82AAFF"> OrdinaryToPrimitive</span><span style="color:#F07178">(</span><span style="color:#BABED8">input</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> hint</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">  }</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">  return</span><span style="color:#BABED8"> input</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span></code></pre></figure>
<blockquote>
<p><a class="underline-highlight-fade" target="_blank" href="https://blog.naver.com/sbshw1/221236403574" rel="noreferrer noopener">코드 출처</a></p>
</blockquote>
<p>input 이 객체이며 toPrimitive 추상 명령이 해당 객체 내에 없다면(<code>input[Symbol.toPrimitive]</code>) <code>OrdinaryToPrimitive</code> 를 호출하고 있다.</p>
<p><code>input[Symbol.toPrimitive]</code> 이 메서드는 객체 프로퍼티로 개발자가 직접 넣은 케이스이므로 여기서는 넘어가겠다.</p>
<p><code>hint</code> 는 어떤 원시 타입을 부를지에 대한 정의로써, <strong>기본 타입이 넘버 타입인 것을 인지</strong>하고 넘어가자.</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="js" data-theme="material-theme-palenight"><code data-language="js" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#C792EA">function</span><span style="color:#82AAFF"> OrdinaryToPrimitive</span><span style="color:#89DDFF"> (</span><span style="color:#BABED8;font-style:italic">O</span><span style="color:#89DDFF">,</span><span style="color:#BABED8;font-style:italic"> hint</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">  if</span><span style="color:#F07178"> ( </span><span style="color:#89DDFF">typeof</span><span style="color:#BABED8"> O</span><span style="color:#89DDFF"> ===</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">object</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF"> ||</span><span style="color:#89DDFF"> typeof</span><span style="color:#BABED8"> O</span><span style="color:#89DDFF"> ===</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">function</span><span style="color:#89DDFF">"</span><span style="color:#F07178"> ) </span><span style="color:#89DDFF">{</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">    if</span><span style="color:#F07178">( </span><span style="color:#89DDFF">typeof</span><span style="color:#BABED8"> hint</span><span style="color:#89DDFF"> ===</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">string</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF"> &amp;&amp;</span><span style="color:#F07178"> ( </span><span style="color:#BABED8">hint</span><span style="color:#89DDFF"> ===</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">string</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF"> ||</span><span style="color:#BABED8"> hint</span><span style="color:#89DDFF"> ===</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">number</span><span style="color:#89DDFF">"</span><span style="color:#F07178"> ) ) </span><span style="color:#89DDFF">{</span></span>
<span data-line=""><span style="color:#C792EA">      let</span><span style="color:#BABED8"> methodNames</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> hint</span><span style="color:#89DDFF"> ===</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">string</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF"> ?</span><span style="color:#F07178"> [ </span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">toString</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">valueOf</span><span style="color:#89DDFF">"</span><span style="color:#F07178"> ] </span><span style="color:#89DDFF">:</span><span style="color:#F07178"> [ </span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">valueOf</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">toString</span><span style="color:#89DDFF">"</span><span style="color:#F07178"> ]</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">      for</span><span style="color:#F07178">( </span><span style="color:#BABED8">name</span><span style="color:#89DDFF"> of</span><span style="color:#BABED8"> methodNames</span><span style="color:#F07178"> ) </span><span style="color:#89DDFF">{</span></span>
<span data-line=""><span style="color:#C792EA">        let</span><span style="color:#BABED8"> method</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> O</span><span style="color:#F07178">[</span><span style="color:#BABED8">name</span><span style="color:#F07178">]</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">        if</span><span style="color:#F07178">( </span><span style="color:#89DDFF">typeof</span><span style="color:#BABED8"> method</span><span style="color:#89DDFF"> ===</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">function</span><span style="color:#89DDFF">"</span><span style="color:#F07178"> ) </span><span style="color:#89DDFF">{</span></span>
<span data-line=""><span style="color:#C792EA">          let</span><span style="color:#BABED8"> result</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> method</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">apply</span><span style="color:#F07178">(</span><span style="color:#BABED8">O</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">          if</span><span style="color:#F07178">( </span><span style="color:#89DDFF">typeof</span><span style="color:#BABED8"> result</span><span style="color:#89DDFF"> !==</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">object</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF"> &amp;&amp;</span><span style="color:#89DDFF"> typeof</span><span style="color:#BABED8"> result</span><span style="color:#89DDFF"> !==</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">function</span><span style="color:#89DDFF">"</span><span style="color:#F07178"> ) </span><span style="color:#89DDFF;font-style:italic">return</span><span style="color:#BABED8"> result</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">        }</span></span>
<span data-line=""><span style="color:#89DDFF">    }</span></span>
<span data-line=""><span style="color:#89DDFF">  }</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic"> throw</span><span style="color:#89DDFF"> new</span><span style="color:#82AAFF"> TypeError</span><span style="color:#F07178">()</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">}</span></span></code></pre></figure>
<blockquote>
<p><a class="underline-highlight-fade" target="_blank" href="https://blog.naver.com/sbshw1/221236403574" rel="noreferrer noopener">코드 출처</a></p>
</blockquote>
<p><code>hint</code> 가 <code>string</code> 이면 <code>[toString, valueOf]</code> 이며 <code>number</code> 이면 <code>[valueOf, toString]</code> 순서로 우선권을 가지는 것을 볼 수 있다.</p>
<p>여기서 <em>우선권</em> 이라는 단어를 사용하였는데, 그 이유는 <code>for</code> 문을 통해 <code>apply</code> 하는 순서가 달라지기 때문이다.</p>
<p>원시 타입을 찾았다면(<code>if( typeof result !== "object" &amp;&amp; typeof result !== "function" )</code>) 결과를 반환하고 아니면 <strong>무시된다</strong> 이는 굉장히 중요한데, 아래에서 예시로 다루겠다.</p>
<ul>
<li>따라서, <strong>타입간 비교에서 암묵적 형변환들은 모두 원시타입으로 변환하기 위한 과정 속에서 일어난다.</strong></li>
</ul>
<h3 id="예제로-정리하기" data-heading="true"><a data-heading="true" href="#예제로-정리하기"><span class="icon icon-link"></span></a>예제로 정리하기</h3>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="js" data-theme="material-theme-palenight"><code data-language="js" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#F78C6C">1.</span><span style="color:#F78C6C"> 4</span><span style="color:#89DDFF"> *</span><span style="color:#BABED8"> []  </span><span style="color:#676E95;font-style:italic">// 0</span></span>
<span data-line=""><span style="color:#F78C6C">2.</span><span style="color:#F78C6C"> 4</span><span style="color:#89DDFF"> +</span><span style="color:#BABED8"> []  </span><span style="color:#676E95;font-style:italic">// "4"</span></span>
<span data-line=""><span style="color:#F78C6C">3.</span><span style="color:#BABED8"> [] </span><span style="color:#89DDFF">+</span><span style="color:#89DDFF"> {}</span><span style="color:#676E95;font-style:italic">  // "[object Object]"</span></span>
<span data-line=""><span style="color:#F78C6C">4.</span><span style="color:#BABED8"> [</span><span style="color:#F78C6C">45</span><span style="color:#BABED8">] </span><span style="color:#89DDFF">==</span><span style="color:#F78C6C"> 45</span><span style="color:#676E95;font-style:italic">  // true</span></span>
<span data-line=""><span style="color:#F78C6C">5.</span><span style="color:#89DDFF"> {}</span><span style="color:#89DDFF"> ==</span><span style="color:#BABED8"> []  </span><span style="color:#676E95;font-style:italic">// ERROR</span></span>
<span data-line=""><span style="color:#F78C6C">6.</span><span style="color:#F78C6C"> 0</span><span style="color:#89DDFF"> ==</span><span style="color:#89DDFF"> '</span><span style="color:#BABED8">\n</span><span style="color:#89DDFF">'</span><span style="color:#676E95;font-style:italic">  // true</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="js" data-theme="material-theme-palenight"><code data-language="js" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#676E95;font-style:italic">// CASE 1.</span></span>
<span data-line=""><span style="color:#F78C6C">1.</span><span style="color:#F78C6C"> 4</span><span style="color:#89DDFF"> *</span><span style="color:#BABED8"> []</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// +를 제외한 산술 연산의 경우 숫자타입이 최상위 우선순위이므로 암묵적 형변환은 Number == ToPrimitive([]) 으로 될 것이다.</span></span>
<span data-line=""><span style="color:#F78C6C">2.</span><span style="color:#F78C6C"> 4</span><span style="color:#89DDFF"> *</span><span style="color:#82AAFF"> Object</span><span style="color:#BABED8">([])  </span><span style="color:#676E95;font-style:italic">// 4 * []</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// Symbol.toPrimitive 정의를 해주지 않았으므로 default hint 는 number 로 설정된다.</span></span>
<span data-line=""><span style="color:#F78C6C">3.</span><span style="color:#F78C6C"> 4</span><span style="color:#89DDFF"> *</span><span style="color:#82AAFF"> Object</span><span style="color:#BABED8">([])</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">valueOf</span><span style="color:#BABED8">()  </span><span style="color:#676E95;font-style:italic">// 4 * []</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// Default hint 가 number 이므로 [valueOf, toString] 순으로 원시 값을 가져올 것이다.</span></span>
<span data-line=""><span style="color:#F78C6C">4.</span><span style="color:#F78C6C"> 4</span><span style="color:#89DDFF"> *</span><span style="color:#82AAFF"> Object</span><span style="color:#BABED8">([])</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">valueOf</span><span style="color:#BABED8">()</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">toString</span><span style="color:#BABED8">()  </span><span style="color:#676E95;font-style:italic">// 4 * ""</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// 하지만 valueOf 는 this 반환으로 객체([])를 반환해 원시타입이 아니게 되므로 무시된다. 따라서 후순위의 toString 함수가 실행된다.</span></span>
<span data-line=""><span style="color:#F78C6C">5.</span><span style="color:#F78C6C"> 4</span><span style="color:#89DDFF"> *</span><span style="color:#82AAFF"> Number</span><span style="color:#BABED8">(</span><span style="color:#82AAFF">Object</span><span style="color:#BABED8">([])</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">valueOf</span><span style="color:#BABED8">()</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">toString</span><span style="color:#BABED8">()) </span><span style="color:#676E95;font-style:italic">// 4 * 0</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// 숫자 * 문자열 연산에서 숫자가 우선순위가 높으므로 Number 타입으로 형변환이 된다.</span></span>
<span data-line=""><span style="color:#F78C6C">6.</span><span style="color:#F78C6C"> 0</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// 그 결과 4 * 0 이 되어 0이 최종 리턴된다.</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="js" data-theme="material-theme-palenight"><code data-language="js" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#676E95;font-style:italic">// CASE 2.</span></span>
<span data-line=""><span style="color:#F78C6C">1.</span><span style="color:#F78C6C"> 4</span><span style="color:#89DDFF"> +</span><span style="color:#BABED8"> []</span></span>
<span data-line=""><span style="color:#F78C6C">2.</span><span style="color:#F78C6C"> 4</span><span style="color:#89DDFF"> +</span><span style="color:#82AAFF"> Object</span><span style="color:#BABED8">([])</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">valueOf</span><span style="color:#BABED8">()</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">toString</span><span style="color:#BABED8">() </span><span style="color:#676E95;font-style:italic">// ""</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// CASE1 예시의 4번까지와 동일하다.</span></span>
<span data-line=""><span style="color:#F78C6C">3.</span><span style="color:#82AAFF"> String</span><span style="color:#BABED8">(</span><span style="color:#F78C6C">4</span><span style="color:#BABED8">) </span><span style="color:#89DDFF">+</span><span style="color:#82AAFF"> Object</span><span style="color:#BABED8">([])</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">valueOf</span><span style="color:#BABED8">()</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">toString</span><span style="color:#BABED8">() </span><span style="color:#676E95;font-style:italic">// "4"</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// + 연산자에서는 숫자보다 문자가 우선순위를 가지므로 숫자가 String 으로 변환되었다.</span></span>
<span data-line=""><span style="color:#F78C6C">4.</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">4</span><span style="color:#89DDFF">"</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="js" data-theme="material-theme-palenight"><code data-language="js" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#676E95;font-style:italic">// CASE 3.</span></span>
<span data-line=""><span style="color:#F78C6C">1.</span><span style="color:#BABED8"> [] </span><span style="color:#89DDFF">+</span><span style="color:#89DDFF"> {}</span></span>
<span data-line=""><span style="color:#F78C6C">2.</span><span style="color:#82AAFF"> Object</span><span style="color:#BABED8">([]) </span><span style="color:#89DDFF">+</span><span style="color:#82AAFF"> Object</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">{}</span><span style="color:#BABED8">)</span></span>
<span data-line=""><span style="color:#F78C6C">3.</span><span style="color:#82AAFF"> Object</span><span style="color:#BABED8">([])</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">valueOf</span><span style="color:#BABED8">() </span><span style="color:#89DDFF">+</span><span style="color:#82AAFF"> Object</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">{}</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">valueOf</span><span style="color:#BABED8">()  </span><span style="color:#676E95;font-style:italic">// [] + {}</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// 모두 객체자신을 반환하므로 toString 연산까지 진행하게 된다.</span></span>
<span data-line=""><span style="color:#F78C6C">4.</span><span style="color:#82AAFF"> Object</span><span style="color:#BABED8">([])</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">valueOf</span><span style="color:#BABED8">()</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">toString</span><span style="color:#BABED8">() </span><span style="color:#89DDFF">+</span><span style="color:#82AAFF"> Object</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">{}</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">valueOf</span><span style="color:#BABED8">()</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">toString</span><span style="color:#BABED8">()  </span><span style="color:#676E95;font-style:italic">// "" + "[object Object]"</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// 객체의 toString 은 prototype 상속으로 최종 this 결과값을 반환해 object Object 가 나타난다.</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// Object.prototype.toString.call(undefined) 호출시 "[object Undefined]" 가 나오는 것 처럼.</span></span>
<span data-line=""><span style="color:#F78C6C">5.</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">[object Object]</span><span style="color:#89DDFF">"</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="js" data-theme="material-theme-palenight"><code data-language="js" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#676E95;font-style:italic">// CASE 4.</span></span>
<span data-line=""><span style="color:#F78C6C">1.</span><span style="color:#BABED8"> [</span><span style="color:#F78C6C">45</span><span style="color:#BABED8">] </span><span style="color:#89DDFF">==</span><span style="color:#F78C6C"> 45</span></span>
<span data-line=""><span style="color:#F78C6C">2.</span><span style="color:#82AAFF"> Object</span><span style="color:#BABED8">([</span><span style="color:#F78C6C">45</span><span style="color:#BABED8">]) </span><span style="color:#89DDFF">==</span><span style="color:#F78C6C"> 45</span></span>
<span data-line=""><span style="color:#F78C6C">3.</span><span style="color:#82AAFF"> Object</span><span style="color:#BABED8">([</span><span style="color:#F78C6C">45</span><span style="color:#BABED8">])</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">valueOf</span><span style="color:#BABED8">() </span><span style="color:#89DDFF">==</span><span style="color:#F78C6C"> 45</span><span style="color:#676E95;font-style:italic"> // [45] == 45</span></span>
<span data-line=""><span style="color:#F78C6C">4.</span><span style="color:#82AAFF"> Object</span><span style="color:#BABED8">([</span><span style="color:#F78C6C">45</span><span style="color:#BABED8">])</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">valueOf</span><span style="color:#BABED8">()</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">toString</span><span style="color:#BABED8">() </span><span style="color:#89DDFF">==</span><span style="color:#F78C6C"> 45</span><span style="color:#676E95;font-style:italic"> // "45" == 45</span></span>
<span data-line=""><span style="color:#F78C6C">5.</span><span style="color:#82AAFF"> Number</span><span style="color:#BABED8">(</span><span style="color:#82AAFF">Object</span><span style="color:#BABED8">([</span><span style="color:#F78C6C">45</span><span style="color:#BABED8">])</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">valueOf</span><span style="color:#BABED8">()</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">toString</span><span style="color:#BABED8">()) </span><span style="color:#89DDFF">==</span><span style="color:#F78C6C"> 45</span><span style="color:#676E95;font-style:italic"> // 45 == 45</span></span>
<span data-line=""><span style="color:#F78C6C">6.</span><span style="color:#FF9CAC"> true</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="js" data-theme="material-theme-palenight"><code data-language="js" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#676E95;font-style:italic">// CASE 5.</span></span>
<span data-line=""><span style="color:#F78C6C">1.</span><span style="color:#89DDFF"> {}</span><span style="color:#89DDFF"> ==</span><span style="color:#BABED8"> []</span></span>
<span data-line=""><span style="color:#676E95;font-style:italic">// {} 중괄호는 "객체"로 인식되는 것이 아닌 "블록 스코프"로 인식되어 사라져버린다!</span></span>
<span data-line=""><span style="color:#F78C6C">2.</span><span style="color:#89DDFF"> ==</span><span style="color:#BABED8"> []</span></span>
<span data-line=""><span style="color:#F78C6C">3.</span><span style="color:#676E95;font-style:italic"> // Uncaught SyntaxError: Unexpected token '=='</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="js" data-theme="material-theme-palenight"><code data-language="js" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#676E95;font-style:italic">// CASE 6.</span></span>
<span data-line=""><span style="color:#F78C6C">1.</span><span style="color:#F78C6C"> 0</span><span style="color:#89DDFF"> ==</span><span style="color:#89DDFF"> '</span><span style="color:#BABED8">\n</span><span style="color:#89DDFF">'</span></span>
<span data-line=""><span style="color:#F78C6C">2.</span><span style="color:#F78C6C"> 0</span><span style="color:#89DDFF"> ==</span><span style="color:#89DDFF"> ""</span></span>
<span data-line=""><span style="color:#F78C6C">3.</span><span style="color:#F78C6C"> 0</span><span style="color:#89DDFF"> ==</span><span style="color:#82AAFF"> Number</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">''</span><span style="color:#BABED8">)</span></span>
<span data-line=""><span style="color:#F78C6C">4.</span><span style="color:#F78C6C"> 0</span><span style="color:#89DDFF"> ==</span><span style="color:#F78C6C"> 0</span></span>
<span data-line=""><span style="color:#F78C6C">5.</span><span style="color:#FF9CAC"> true</span></span></code></pre></figure>
<h3 id="한발-더-나아가기" data-heading="true"><a data-heading="true" href="#한발-더-나아가기"><span class="icon icon-link"></span></a>한발 더 나아가기</h3>
<ol>
<li><code>hint</code> 는 언제 <code>default</code> 값을 벗어나게 될까?
<ul>
<li><code>&lt;</code>, <code>&gt;</code> 혹은 <code>-</code>, <code>*</code> 와 같이 명확한 숫자 비교에선 <code>number</code> 가 된다.(<code>+</code> 는 문자열도 포함되므로 제외된다)</li>
</ul>
</li>
<li><code>Date</code> 객체를 제외한 모든 내장 객체는 <code>default</code> 와 <code>number</code> 를 동일하게 처리하므로 <code>number</code> 로 이해하는게 편하다.
<ul>
<li>일반 객체는 <a class="underline-highlight-fade" target="_blank" href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Symbol/@@toPrimitive" rel="noreferrer noopener">Symbol.prototype[@@toPrimitive]</a>를 사용하는 반면 Date 객체는 <a class="underline-highlight-fade" target="_blank" href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Date/@@toPrimitive" rel="noreferrer noopener">Date.prototype[@@toPrimitive]</a>를 사용한다.</li>
</ul>
</li>
<li><code>boolean</code> 타입의 <code>hint</code> 는 존재하지 않는다. 모든 객체는 <code>true</code> 로 평가되므로 <code>string</code>, <code>number</code> 만 처리하면 된다.</li>
<li><code>[Symbol.toPrimitive]</code> 를 커스텀 할 수 있는가?
<ul>
<li>가능하다.</li>
</ul>
</li>
</ol>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="js" data-theme="material-theme-palenight"><code data-language="js" data-theme="material-theme-palenight" style="display: grid;"><span data-line=""><span style="color:#C792EA">const</span><span style="color:#BABED8"> user </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#F07178">  name</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">1ilsang</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span></span>
<span data-line=""><span style="color:#F07178">  money</span><span style="color:#89DDFF">:</span><span style="color:#F78C6C"> 1000</span><span style="color:#89DDFF">,</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#BABED8">  [Symbol</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">toPrimitive]</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">hint</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span data-line=""><span style="color:#82AAFF">    alert</span><span style="color:#F07178">(</span><span style="color:#89DDFF">`</span><span style="color:#C3E88D">hint: </span><span style="color:#89DDFF">${</span><span style="color:#BABED8">hint</span><span style="color:#89DDFF">}`</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF;font-style:italic">    return</span><span style="color:#BABED8"> hint</span><span style="color:#89DDFF"> ==</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">string</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF"> ?</span><span style="color:#89DDFF"> `</span><span style="color:#C3E88D">{name: "</span><span style="color:#89DDFF">${</span><span style="color:#89DDFF">this.</span><span style="color:#BABED8">name</span><span style="color:#89DDFF">}</span><span style="color:#C3E88D">"}</span><span style="color:#89DDFF">`</span><span style="color:#89DDFF"> :</span><span style="color:#89DDFF"> this.</span><span style="color:#BABED8">money</span><span style="color:#89DDFF">;</span></span>
<span data-line=""><span style="color:#89DDFF">  },</span></span>
<span data-line=""><span style="color:#89DDFF">};</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#676E95;font-style:italic">// 데모:</span></span>
<span data-line=""><span style="color:#82AAFF">alert</span><span style="color:#BABED8">(user)</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // hint: string -&gt; {name: "1ilsang"}</span></span>
<span data-line=""><span style="color:#82AAFF">alert</span><span style="color:#BABED8">([user] </span><span style="color:#89DDFF">==</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">{name: "1ilsang"}</span><span style="color:#89DDFF">'</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // hint: string -&gt; {name: "1ilsang"} == {name: "1ilsang"}; true;</span></span>
<span data-line=""><span style="color:#82AAFF">alert</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">+</span><span style="color:#BABED8">user)</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // hint: number -&gt; 1000</span></span>
<span data-line=""><span style="color:#82AAFF">alert</span><span style="color:#BABED8">(user </span><span style="color:#89DDFF">+</span><span style="color:#F78C6C"> 500</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // hint: default -&gt; default는 number가 기본타입이므로 1000 + 500 -&gt; 1500</span></span>
<span data-line=""><span style="color:#82AAFF">alert</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">3</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF"> -</span><span style="color:#BABED8"> user)</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // hint: number -&gt; '3' - 1000 -&gt; 3 - 1000 -&gt; -997</span></span>
<span data-line=""><span style="color:#82AAFF">alert</span><span style="color:#BABED8">(user </span><span style="color:#89DDFF">&gt;</span><span style="color:#F78C6C"> 10</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // hint: number -&gt; 1000 &gt; 10; true</span></span>
<span data-line=""><span style="color:#82AAFF">alert</span><span style="color:#BABED8">(user </span><span style="color:#89DDFF">+</span><span style="color:#89DDFF"> new</span><span style="color:#82AAFF"> Date</span><span style="color:#BABED8">())</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // hint: default -&gt; 1000 + 'Sat Apr 22 2023 17:02:00 GMT+0900 (한국 표준시)' -&gt; '1000Sat Apr 22 2023 17:02:00 GMT+0900 (한국 표준시)'</span></span></code></pre></figure>
<ol start="5">
<li><code>NaN</code> 은 모든 경우에서 같지 않다.
<ul>
<li><code>NaN == NaN // false</code></li>
</ul>
</li>
</ol>
<h3 id="결론" data-heading="true"><a data-heading="true" href="#결론"><span class="icon icon-link"></span></a>결론</h3>
<ol>
<li>타입간 비교에서 암묵적 형변환들은 모두 원시 타입으로 변환하기 위한 과정 속에서 <code>ToPrimitive</code> 추상 명령을 통해 일어난다.</li>
<li><code>==</code> 연산자와 <code>===</code> 연산자의 차이는 무엇인가?
<ul>
<li>"타입까지 비교 여부" 라고하면 애매하다. "암묵적 형변환을 허용하는가"의 차이가 더 명확한 워딩이다.</li>
</ul>
</li>
<li>타입스크립트와 <code>===</code> 연산자를 사용하자.</li>
</ol>
<h3 id="ref" data-heading="true"><a data-heading="true" href="#ref"><span class="icon icon-link"></span></a>Ref</h3>
<ul>
<li>모던 자바스크립트 Deep-dive: 7장 연산자 추상 연산</li>
<li><a class="underline-highlight-fade" target="_blank" href="https://262.ecma-international.org/11.0/#sec-toprimitive" rel="noreferrer noopener">ECMA2020</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Equality_comparisons_and_sameness" rel="noreferrer noopener">동치 연산 관계</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="https://blog.naver.com/sbshw1/221236403574" rel="noreferrer noopener">추상 명령 코드</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="https://ko.javascript.info/object-toprimitive" rel="noreferrer noopener">객체를 원시형으로 변환하기</a></li>
<li><a class="underline-highlight-fade" target="_blank" href="https://medium.com/%EC%98%A4%EB%8A%98%EC%9D%98-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EC%97%90%EC%84%9C-object-object-%EA%B0%80-%EB%8C%80%EC%B2%B4-%EB%AD%98%EA%B9%8C-fe55b754e709" rel="noreferrer noopener">"[object Object]"</a></li>
</ul></div><aside class="absolute inline-block h-full top-0 left-full break-words max-xl:hidden" aria-label="index"><ul class="ml-9 sticky pl-4 top-32 w-[calc(50vw-35vw)] border-l-2 border-l-base min-[1320px]:ml-20 min-[1320px]:top-48"><li data-id="tldr" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue before:content-['-'] before:mr-1">TL;DR!</li><li><ul class="ml-2.5 last:mb-2"><li data-id="들어가기-전에" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue before:content-['-'] before:mr-1">들어가기 전에</li><li data-id="암묵적-형변환은-언제-일어나나요" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue before:content-['-'] before:mr-1">암묵적 형변환은 언제 일어나나요?</li><li data-id="동치연산자-한짤로-보기" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue before:content-['-'] before:mr-1">동치연산자 한짤로 보기</li></ul></li><li data-id="toprimitive-는-동치연산-뿐만-아니라-원시값과-비교가-필요한-모든-순간에-동작한다" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue">ToPrimitive 는 동치연산 뿐만 아니라 원시값과 비교가 필요한 모든 순간에 동작한다</li><li><ul class="ml-2.5 last:mb-2"><li data-id="예제로-정리하기" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue before:content-['-'] before:mr-1">예제로 정리하기</li><li data-id="한발-더-나아가기" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue before:content-['-'] before:mr-1">한발 더 나아가기</li><li data-id="결론" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue before:content-['-'] before:mr-1">결론</li><li data-id="ref" class="pt-0.5 text-base select-none	cursor-pointer hover:text-sub-blue before:content-['-'] before:mr-1">Ref</li></ul></li></ul></aside></section><a class="highlighter mt-24 [&amp;&amp;]:text-transparent bg-rainbow-water bg-clip-text bg-[length:400%_400%] animate-rainbow-water" href="https://github.com/1ilsang/dev/issues/new?labels=🧊 comment&amp;assignees=1ilsang&amp;title=[🧊] %EC%95%8C%EB%9E%91%EB%A7%90%EB%9E%91%20%EC%95%94%EB%AC%B5%EC%A0%81%20%ED%98%95%EB%B3%80%ED%99%98%20%EB%A7%90%EB%9E%91%EB%A7%90%EB%9E%91%20%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0&amp;body=<!-- 환영합니다. 이슈 남겨주시면 빠르게 답변드리겠습니다. 🙇 -->" rel="noopener noreferrer" target="_blank">📮 이 포스트에 관심 있으신가요? 이슈를 남겨주세요! 👍</a><div class="flex items-center mt-1.5 mb-56"><div>☕ 소주 한 잔 후원하기</div><sub>(예금주: 이상철)</sub><img class="w-20 cursor-pointer object-contain hover:animate-bouncing" src="/images/logo/toss-pay.webp" alt="toss"><img class="w-12 cursor-pointer object-contain hover:animate-bouncing" src="/images/logo/kakao-pay.webp" alt="kakao"></div></section>